!function(t){function c(l){if(n[l])return n[l].exports;var a=n[l]={exports:{},id:l,loaded:!1};return t[l].call(a.exports,a,a.exports,c),a.loaded=!0,a.exports}var n={};return c.m=t,c.c=n,c.p="",c(0)}({0:function(t,c,n){t.exports=n(8)},8:function(module,exports,__webpack_require__){eval("/*** IMPORTS FROM imports-loader ***/\nvar define = false;\n\n/*!\n * iScroll v4.2.5 ~ Copyright (c) 2012 Matteo Spinelli, http://cubiq.org\n * Released under MIT license, http://cubiq.org/license\n */\n(function(window, doc){\nvar m = Math,\n	dummyStyle = doc.createElement('div').style,\n	vendor = (function () {\n		var vendors = 't,webkitT,MozT,msT,OT'.split(','),\n			t,\n			i = 0,\n			l = vendors.length;\n\n		for ( ; i < l; i++ ) {\n			t = vendors[i] + 'ransform';\n			if ( t in dummyStyle ) {\n				return vendors[i].substr(0, vendors[i].length - 1);\n			}\n		}\n\n		return false;\n	})(),\n	cssVendor = vendor ? '-' + vendor.toLowerCase() + '-' : '',\n\n	// Style properties\n	transform = prefixStyle('transform'),\n	transitionProperty = prefixStyle('transitionProperty'),\n	transitionDuration = prefixStyle('transitionDuration'),\n	transformOrigin = prefixStyle('transformOrigin'),\n	transitionTimingFunction = prefixStyle('transitionTimingFunction'),\n	transitionDelay = prefixStyle('transitionDelay'),\n\n    // Browser capabilities\n	isAndroid = (/android/gi).test(navigator.appVersion),\n	isIDevice = (/iphone|ipad/gi).test(navigator.appVersion),\n	isTouchPad = (/hp-tablet/gi).test(navigator.appVersion),\n\n    has3d = prefixStyle('perspective') in dummyStyle,\n    hasTouch = 'ontouchstart' in window && !isTouchPad,\n    hasTransform = vendor !== false,\n    hasTransitionEnd = prefixStyle('transition') in dummyStyle,\n\n	RESIZE_EV = 'onorientationchange' in window ? 'orientationchange' : 'resize',\n	START_EV = hasTouch ? 'touchstart' : 'mousedown',\n	MOVE_EV = hasTouch ? 'touchmove' : 'mousemove',\n	END_EV = hasTouch ? 'touchend' : 'mouseup',\n	CANCEL_EV = hasTouch ? 'touchcancel' : 'mouseup',\n	TRNEND_EV = (function () {\n		if ( vendor === false ) return false;\n\n		var transitionEnd = {\n				''			: 'transitionend',\n				'webkit'	: 'webkitTransitionEnd',\n				'Moz'		: 'transitionend',\n				'O'			: 'otransitionend',\n				'ms'		: 'MSTransitionEnd'\n			};\n\n		return transitionEnd[vendor];\n	})(),\n\n	nextFrame = (function() {\n		return window.requestAnimationFrame ||\n			window.webkitRequestAnimationFrame ||\n			window.mozRequestAnimationFrame ||\n			window.oRequestAnimationFrame ||\n			window.msRequestAnimationFrame ||\n			function(callback) { return setTimeout(callback, 1); };\n	})(),\n	cancelFrame = (function () {\n		return window.cancelRequestAnimationFrame ||\n			window.webkitCancelAnimationFrame ||\n			window.webkitCancelRequestAnimationFrame ||\n			window.mozCancelRequestAnimationFrame ||\n			window.oCancelRequestAnimationFrame ||\n			window.msCancelRequestAnimationFrame ||\n			clearTimeout;\n	})(),\n\n	// Helpers\n	translateZ = has3d ? ' translateZ(0)' : '',\n\n	// Constructor\n	iScroll = function (el, options) {\n		var that = this,\n			i;\n\n		that.wrapper = typeof el == 'object' ? el : doc.getElementById(el);\n		that.wrapper.style.overflow = 'hidden';\n		that.scroller = that.wrapper.children[0];\n\n		// Default options\n		that.options = {\n			hScroll: true,\n			vScroll: true,\n			x: 0,\n			y: 0,\n			bounce: true,\n			bounceLock: false,\n			momentum: true,\n			lockDirection: true,\n			useTransform: true,\n			useTransition: false,\n			topOffset: 0,\n			checkDOMChanges: false,		// Experimental\n			handleClick: true,\n\n			// Scrollbar\n			hScrollbar: true,\n			vScrollbar: true,\n			fixedScrollbar: isAndroid,\n			hideScrollbar: isIDevice,\n			fadeScrollbar: isIDevice && has3d,\n			scrollbarClass: '',\n\n			// Zoom\n			zoom: false,\n			zoomMin: 1,\n			zoomMax: 4,\n			doubleTapZoom: 2,\n			wheelAction: 'scroll',\n\n			// Snap\n			snap: false,\n			snapThreshold: 1,\n\n			// Events\n			onRefresh: null,\n			onBeforeScrollStart: function (e) { e.preventDefault(); },\n			onScrollStart: null,\n			onBeforeScrollMove: null,\n			onScrollMove: null,\n			onBeforeScrollEnd: null,\n			onScrollEnd: null,\n			onTouchEnd: null,\n			onDestroy: null,\n			onZoomStart: null,\n			onZoom: null,\n			onZoomEnd: null\n		};\n\n		// User defined options\n		for (i in options) that.options[i] = options[i];\n		\n		// Set starting position\n		that.x = that.options.x;\n		that.y = that.options.y;\n\n		// Normalize options\n		that.options.useTransform = hasTransform && that.options.useTransform;\n		that.options.hScrollbar = that.options.hScroll && that.options.hScrollbar;\n		that.options.vScrollbar = that.options.vScroll && that.options.vScrollbar;\n		that.options.zoom = that.options.useTransform && that.options.zoom;\n		that.options.useTransition = hasTransitionEnd && that.options.useTransition;\n\n		// Helpers FIX ANDROID BUG!\n		// translate3d and scale doesn't work together!\n		// Ignoring 3d ONLY WHEN YOU SET that.options.zoom\n		if ( that.options.zoom && isAndroid ){\n			translateZ = '';\n		}\n		\n		// Set some default styles\n		that.scroller.style[transitionProperty] = that.options.useTransform ? cssVendor + 'transform' : 'top left';\n		that.scroller.style[transitionDuration] = '0';\n		that.scroller.style[transformOrigin] = '0 0';\n		if (that.options.useTransition) that.scroller.style[transitionTimingFunction] = 'cubic-bezier(0.33,0.66,0.66,1)';\n		\n		if (that.options.useTransform) that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px)' + translateZ;\n		else that.scroller.style.cssText += ';position:absolute;top:' + that.y + 'px;left:' + that.x + 'px';\n\n		if (that.options.useTransition) that.options.fixedScrollbar = true;\n\n		that.refresh();\n\n		that._bind(RESIZE_EV, window);\n		that._bind(START_EV);\n		if (!hasTouch) {\n			if (that.options.wheelAction != 'none') {\n				that._bind('DOMMouseScroll');\n				that._bind('mousewheel');\n			}\n		}\n\n		if (that.options.checkDOMChanges) that.checkDOMTime = setInterval(function () {\n			that._checkDOMChanges();\n		}, 500);\n	};\n\n// Prototype\niScroll.prototype = {\n	enabled: true,\n	x: 0,\n	y: 0,\n	steps: [],\n	scale: 1,\n	currPageX: 0, currPageY: 0,\n	pagesX: [], pagesY: [],\n	aniTime: null,\n	wheelZoomCount: 0,\n	\n	handleEvent: function (e) {\n		var that = this;\n		switch(e.type) {\n			case START_EV:\n				if (!hasTouch && e.button !== 0) return;\n				that._start(e);\n				break;\n			case MOVE_EV: that._move(e); break;\n			case END_EV:\n			case CANCEL_EV: that._end(e); break;\n			case RESIZE_EV: that._resize(); break;\n			case 'DOMMouseScroll': case 'mousewheel': that._wheel(e); break;\n			case TRNEND_EV: that._transitionEnd(e); break;\n		}\n	},\n	\n	_checkDOMChanges: function () {\n		if (this.moved || this.zoomed || this.animating ||\n			(this.scrollerW == this.scroller.offsetWidth * this.scale && this.scrollerH == this.scroller.offsetHeight * this.scale)) return;\n\n		this.refresh();\n	},\n	\n	_scrollbar: function (dir) {\n		var that = this,\n			bar;\n\n		if (!that[dir + 'Scrollbar']) {\n			if (that[dir + 'ScrollbarWrapper']) {\n				if (hasTransform) that[dir + 'ScrollbarIndicator'].style[transform] = '';\n				that[dir + 'ScrollbarWrapper'].parentNode.removeChild(that[dir + 'ScrollbarWrapper']);\n				that[dir + 'ScrollbarWrapper'] = null;\n				that[dir + 'ScrollbarIndicator'] = null;\n			}\n\n			return;\n		}\n\n		if (!that[dir + 'ScrollbarWrapper']) {\n			// Create the scrollbar wrapper\n			bar = doc.createElement('div');\n\n			if (that.options.scrollbarClass) bar.className = that.options.scrollbarClass + dir.toUpperCase();\n			else bar.style.cssText = 'position:absolute;z-index:100;' + (dir == 'h' ? 'height:7px;bottom:1px;left:2px;right:' + (that.vScrollbar ? '7' : '2') + 'px' : 'width:7px;bottom:' + (that.hScrollbar ? '7' : '2') + 'px;top:2px;right:1px');\n\n			bar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:opacity;' + cssVendor + 'transition-duration:' + (that.options.fadeScrollbar ? '350ms' : '0') + ';overflow:hidden;opacity:' + (that.options.hideScrollbar ? '0' : '1');\n\n			that.wrapper.appendChild(bar);\n			that[dir + 'ScrollbarWrapper'] = bar;\n\n			// Create the scrollbar indicator\n			bar = doc.createElement('div');\n			if (!that.options.scrollbarClass) {\n				bar.style.cssText = 'position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);' + cssVendor + 'background-clip:padding-box;' + cssVendor + 'box-sizing:border-box;' + (dir == 'h' ? 'height:100%' : 'width:100%') + ';' + cssVendor + 'border-radius:3px;border-radius:3px';\n			}\n			bar.style.cssText += ';pointer-events:none;' + cssVendor + 'transition-property:' + cssVendor + 'transform;' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);' + cssVendor + 'transition-duration:0;' + cssVendor + 'transform: translate(0,0)' + translateZ;\n			if (that.options.useTransition) bar.style.cssText += ';' + cssVendor + 'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';\n\n			that[dir + 'ScrollbarWrapper'].appendChild(bar);\n			that[dir + 'ScrollbarIndicator'] = bar;\n		}\n\n		if (dir == 'h') {\n			that.hScrollbarSize = that.hScrollbarWrapper.clientWidth;\n			that.hScrollbarIndicatorSize = m.max(m.round(that.hScrollbarSize * that.hScrollbarSize / that.scrollerW), 8);\n			that.hScrollbarIndicator.style.width = that.hScrollbarIndicatorSize + 'px';\n			that.hScrollbarMaxScroll = that.hScrollbarSize - that.hScrollbarIndicatorSize;\n			that.hScrollbarProp = that.hScrollbarMaxScroll / that.maxScrollX;\n		} else {\n			that.vScrollbarSize = that.vScrollbarWrapper.clientHeight;\n			that.vScrollbarIndicatorSize = m.max(m.round(that.vScrollbarSize * that.vScrollbarSize / that.scrollerH), 8);\n			that.vScrollbarIndicator.style.height = that.vScrollbarIndicatorSize + 'px';\n			that.vScrollbarMaxScroll = that.vScrollbarSize - that.vScrollbarIndicatorSize;\n			that.vScrollbarProp = that.vScrollbarMaxScroll / that.maxScrollY;\n		}\n\n		// Reset position\n		that._scrollbarPos(dir, true);\n	},\n	\n	_resize: function () {\n		var that = this;\n		setTimeout(function () { that.refresh(); }, isAndroid ? 200 : 0);\n	},\n	\n	_pos: function (x, y) {\n		if (this.zoomed) return;\n\n		x = this.hScroll ? x : 0;\n		y = this.vScroll ? y : 0;\n\n		if (this.options.useTransform) {\n			this.scroller.style[transform] = 'translate(' + x + 'px,' + y + 'px) scale(' + this.scale + ')' + translateZ;\n		} else {\n			x = m.round(x);\n			y = m.round(y);\n			this.scroller.style.left = x + 'px';\n			this.scroller.style.top = y + 'px';\n		}\n\n		this.x = x;\n		this.y = y;\n\n		this._scrollbarPos('h');\n		this._scrollbarPos('v');\n	},\n\n	_scrollbarPos: function (dir, hidden) {\n		var that = this,\n			pos = dir == 'h' ? that.x : that.y,\n			size;\n\n		if (!that[dir + 'Scrollbar']) return;\n\n		pos = that[dir + 'ScrollbarProp'] * pos;\n\n		if (pos < 0) {\n			if (!that.options.fixedScrollbar) {\n				size = that[dir + 'ScrollbarIndicatorSize'] + m.round(pos * 3);\n				if (size < 8) size = 8;\n				that[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n			}\n			pos = 0;\n		} else if (pos > that[dir + 'ScrollbarMaxScroll']) {\n			if (!that.options.fixedScrollbar) {\n				size = that[dir + 'ScrollbarIndicatorSize'] - m.round((pos - that[dir + 'ScrollbarMaxScroll']) * 3);\n				if (size < 8) size = 8;\n				that[dir + 'ScrollbarIndicator'].style[dir == 'h' ? 'width' : 'height'] = size + 'px';\n				pos = that[dir + 'ScrollbarMaxScroll'] + (that[dir + 'ScrollbarIndicatorSize'] - size);\n			} else {\n				pos = that[dir + 'ScrollbarMaxScroll'];\n			}\n		}\n\n		that[dir + 'ScrollbarWrapper'].style[transitionDelay] = '0';\n		that[dir + 'ScrollbarWrapper'].style.opacity = hidden && that.options.hideScrollbar ? '0' : '1';\n		that[dir + 'ScrollbarIndicator'].style[transform] = 'translate(' + (dir == 'h' ? pos + 'px,0)' : '0,' + pos + 'px)') + translateZ;\n	},\n	\n	_start: function (e) {\n		var that = this,\n			point = hasTouch ? e.touches[0] : e,\n			matrix, x, y,\n			c1, c2;\n\n		if (!that.enabled) return;\n\n		if (that.options.onBeforeScrollStart) that.options.onBeforeScrollStart.call(that, e);\n\n		if (that.options.useTransition || that.options.zoom) that._transitionTime(0);\n\n		that.moved = false;\n		that.animating = false;\n		that.zoomed = false;\n		that.distX = 0;\n		that.distY = 0;\n		that.absDistX = 0;\n		that.absDistY = 0;\n		that.dirX = 0;\n		that.dirY = 0;\n\n		// Gesture start\n		if (that.options.zoom && hasTouch && e.touches.length > 1) {\n			c1 = m.abs(e.touches[0].pageX-e.touches[1].pageX);\n			c2 = m.abs(e.touches[0].pageY-e.touches[1].pageY);\n			that.touchesDistStart = m.sqrt(c1 * c1 + c2 * c2);\n\n			that.originX = m.abs(e.touches[0].pageX + e.touches[1].pageX - that.wrapperOffsetLeft * 2) / 2 - that.x;\n			that.originY = m.abs(e.touches[0].pageY + e.touches[1].pageY - that.wrapperOffsetTop * 2) / 2 - that.y;\n\n			if (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n		}\n\n		if (that.options.momentum) {\n			if (that.options.useTransform) {\n				// Very lame general purpose alternative to CSSMatrix\n				matrix = getComputedStyle(that.scroller, null)[transform].replace(/[^0-9\\-.,]/g, '').split(',');\n				x = +(matrix[12] || matrix[4]);\n				y = +(matrix[13] || matrix[5]);\n			} else {\n				x = +getComputedStyle(that.scroller, null).left.replace(/[^0-9-]/g, '');\n				y = +getComputedStyle(that.scroller, null).top.replace(/[^0-9-]/g, '');\n			}\n			\n			if (x != that.x || y != that.y) {\n				if (that.options.useTransition) that._unbind(TRNEND_EV);\n				else cancelFrame(that.aniTime);\n				that.steps = [];\n				that._pos(x, y);\n				if (that.options.onScrollEnd) that.options.onScrollEnd.call(that);\n			}\n		}\n\n		that.absStartX = that.x;	// Needed by snap threshold\n		that.absStartY = that.y;\n\n		that.startX = that.x;\n		that.startY = that.y;\n		that.pointX = point.pageX;\n		that.pointY = point.pageY;\n\n		that.startTime = e.timeStamp || Date.now();\n\n		if (that.options.onScrollStart) that.options.onScrollStart.call(that, e);\n\n		that._bind(MOVE_EV, window);\n		that._bind(END_EV, window);\n		that._bind(CANCEL_EV, window);\n	},\n	\n	_move: function (e) {\n		var that = this,\n			point = hasTouch ? e.touches[0] : e,\n			deltaX = point.pageX - that.pointX,\n			deltaY = point.pageY - that.pointY,\n			newX = that.x + deltaX,\n			newY = that.y + deltaY,\n			c1, c2, scale,\n			timestamp = e.timeStamp || Date.now();\n\n		if (that.options.onBeforeScrollMove) that.options.onBeforeScrollMove.call(that, e);\n\n		// Zoom\n		if (that.options.zoom && hasTouch && e.touches.length > 1) {\n			c1 = m.abs(e.touches[0].pageX - e.touches[1].pageX);\n			c2 = m.abs(e.touches[0].pageY - e.touches[1].pageY);\n			that.touchesDist = m.sqrt(c1*c1+c2*c2);\n\n			that.zoomed = true;\n\n			scale = 1 / that.touchesDistStart * that.touchesDist * this.scale;\n\n			if (scale < that.options.zoomMin) scale = 0.5 * that.options.zoomMin * Math.pow(2.0, scale / that.options.zoomMin);\n			else if (scale > that.options.zoomMax) scale = 2.0 * that.options.zoomMax * Math.pow(0.5, that.options.zoomMax / scale);\n\n			that.lastScale = scale / this.scale;\n\n			newX = this.originX - this.originX * that.lastScale + this.x;\n			newY = this.originY - this.originY * that.lastScale + this.y;\n\n			this.scroller.style[transform] = 'translate(' + newX + 'px,' + newY + 'px) scale(' + scale + ')' + translateZ;\n\n			if (that.options.onZoom) that.options.onZoom.call(that, e);\n			return;\n		}\n\n		that.pointX = point.pageX;\n		that.pointY = point.pageY;\n\n		// Slow down if outside of the boundaries\n		if (newX > 0 || newX < that.maxScrollX) {\n			newX = that.options.bounce ? that.x + (deltaX / 2) : newX >= 0 || that.maxScrollX >= 0 ? 0 : that.maxScrollX;\n		}\n		if (newY > that.minScrollY || newY < that.maxScrollY) {\n			newY = that.options.bounce ? that.y + (deltaY / 2) : newY >= that.minScrollY || that.maxScrollY >= 0 ? that.minScrollY : that.maxScrollY;\n		}\n\n		that.distX += deltaX;\n		that.distY += deltaY;\n		that.absDistX = m.abs(that.distX);\n		that.absDistY = m.abs(that.distY);\n\n		if (that.absDistX < 6 && that.absDistY < 6) {\n			return;\n		}\n\n		// Lock direction\n		if (that.options.lockDirection) {\n			if (that.absDistX > that.absDistY + 5) {\n				newY = that.y;\n				deltaY = 0;\n			} else if (that.absDistY > that.absDistX + 5) {\n				newX = that.x;\n				deltaX = 0;\n			}\n		}\n\n		that.moved = true;\n		that._pos(newX, newY);\n		that.dirX = deltaX > 0 ? -1 : deltaX < 0 ? 1 : 0;\n		that.dirY = deltaY > 0 ? -1 : deltaY < 0 ? 1 : 0;\n\n		if (timestamp - that.startTime > 300) {\n			that.startTime = timestamp;\n			that.startX = that.x;\n			that.startY = that.y;\n		}\n		\n		if (that.options.onScrollMove) that.options.onScrollMove.call(that, e);\n	},\n	\n	_end: function (e) {\n		if (hasTouch && e.touches.length !== 0) return;\n\n		var that = this,\n			point = hasTouch ? e.changedTouches[0] : e,\n			target, ev,\n			momentumX = { dist:0, time:0 },\n			momentumY = { dist:0, time:0 },\n			duration = (e.timeStamp || Date.now()) - that.startTime,\n			newPosX = that.x,\n			newPosY = that.y,\n			distX, distY,\n			newDuration,\n			snap,\n			scale;\n\n		that._unbind(MOVE_EV, window);\n		that._unbind(END_EV, window);\n		that._unbind(CANCEL_EV, window);\n\n		if (that.options.onBeforeScrollEnd) that.options.onBeforeScrollEnd.call(that, e);\n\n		if (that.zoomed) {\n			scale = that.scale * that.lastScale;\n			scale = Math.max(that.options.zoomMin, scale);\n			scale = Math.min(that.options.zoomMax, scale);\n			that.lastScale = scale / that.scale;\n			that.scale = scale;\n\n			that.x = that.originX - that.originX * that.lastScale + that.x;\n			that.y = that.originY - that.originY * that.lastScale + that.y;\n			\n			that.scroller.style[transitionDuration] = '200ms';\n			that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + that.scale + ')' + translateZ;\n			\n			that.zoomed = false;\n			that.refresh();\n\n			if (that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n			return;\n		}\n\n		if (!that.moved) {\n			if (hasTouch) {\n				if (that.doubleTapTimer && that.options.zoom) {\n					// Double tapped\n					clearTimeout(that.doubleTapTimer);\n					that.doubleTapTimer = null;\n					if (that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n					that.zoom(that.pointX, that.pointY, that.scale == 1 ? that.options.doubleTapZoom : 1);\n					if (that.options.onZoomEnd) {\n						setTimeout(function() {\n							that.options.onZoomEnd.call(that, e);\n						}, 200); // 200 is default zoom duration\n					}\n				} else if (this.options.handleClick) {\n					that.doubleTapTimer = setTimeout(function () {\n						that.doubleTapTimer = null;\n\n						// Find the last touched element\n						target = point.target;\n						while (target.nodeType != 1) target = target.parentNode;\n\n						if (target.tagName != 'SELECT' && target.tagName != 'INPUT' && target.tagName != 'TEXTAREA') {\n							ev = doc.createEvent('MouseEvents');\n							ev.initMouseEvent('click', true, true, e.view, 1,\n								point.screenX, point.screenY, point.clientX, point.clientY,\n								e.ctrlKey, e.altKey, e.shiftKey, e.metaKey,\n								0, null);\n							ev._fake = true;\n							target.dispatchEvent(ev);\n						}\n					}, that.options.zoom ? 250 : 0);\n				}\n			}\n\n			that._resetPos(400);\n\n			if (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n			return;\n		}\n\n		if (duration < 300 && that.options.momentum) {\n			momentumX = newPosX ? that._momentum(newPosX - that.startX, duration, -that.x, that.scrollerW - that.wrapperW + that.x, that.options.bounce ? that.wrapperW : 0) : momentumX;\n			momentumY = newPosY ? that._momentum(newPosY - that.startY, duration, -that.y, (that.maxScrollY < 0 ? that.scrollerH - that.wrapperH + that.y - that.minScrollY : 0), that.options.bounce ? that.wrapperH : 0) : momentumY;\n\n			newPosX = that.x + momentumX.dist;\n			newPosY = that.y + momentumY.dist;\n\n			if ((that.x > 0 && newPosX > 0) || (that.x < that.maxScrollX && newPosX < that.maxScrollX)) momentumX = { dist:0, time:0 };\n			if ((that.y > that.minScrollY && newPosY > that.minScrollY) || (that.y < that.maxScrollY && newPosY < that.maxScrollY)) momentumY = { dist:0, time:0 };\n		}\n\n		if (momentumX.dist || momentumY.dist) {\n			newDuration = m.max(m.max(momentumX.time, momentumY.time), 10);\n\n			// Do we need to snap?\n			if (that.options.snap) {\n				distX = newPosX - that.absStartX;\n				distY = newPosY - that.absStartY;\n				if (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) { that.scrollTo(that.absStartX, that.absStartY, 200); }\n				else {\n					snap = that._snap(newPosX, newPosY);\n					newPosX = snap.x;\n					newPosY = snap.y;\n					newDuration = m.max(snap.time, newDuration);\n				}\n			}\n\n			that.scrollTo(m.round(newPosX), m.round(newPosY), newDuration);\n\n			if (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n			return;\n		}\n\n		// Do we need to snap?\n		if (that.options.snap) {\n			distX = newPosX - that.absStartX;\n			distY = newPosY - that.absStartY;\n			if (m.abs(distX) < that.options.snapThreshold && m.abs(distY) < that.options.snapThreshold) that.scrollTo(that.absStartX, that.absStartY, 200);\n			else {\n				snap = that._snap(that.x, that.y);\n				if (snap.x != that.x || snap.y != that.y) that.scrollTo(snap.x, snap.y, snap.time);\n			}\n\n			if (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n			return;\n		}\n\n		that._resetPos(200);\n		if (that.options.onTouchEnd) that.options.onTouchEnd.call(that, e);\n	},\n	\n	_resetPos: function (time) {\n		var that = this,\n			resetX = that.x >= 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x,\n			resetY = that.y >= that.minScrollY || that.maxScrollY > 0 ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n		if (resetX == that.x && resetY == that.y) {\n			if (that.moved) {\n				that.moved = false;\n				if (that.options.onScrollEnd) that.options.onScrollEnd.call(that);		// Execute custom code on scroll end\n			}\n\n			if (that.hScrollbar && that.options.hideScrollbar) {\n				if (vendor == 'webkit') that.hScrollbarWrapper.style[transitionDelay] = '300ms';\n				that.hScrollbarWrapper.style.opacity = '0';\n			}\n			if (that.vScrollbar && that.options.hideScrollbar) {\n				if (vendor == 'webkit') that.vScrollbarWrapper.style[transitionDelay] = '300ms';\n				that.vScrollbarWrapper.style.opacity = '0';\n			}\n\n			return;\n		}\n\n		that.scrollTo(resetX, resetY, time || 0);\n	},\n\n	_wheel: function (e) {\n		var that = this,\n			wheelDeltaX, wheelDeltaY,\n			deltaX, deltaY,\n			deltaScale;\n\n		if ('wheelDeltaX' in e) {\n			wheelDeltaX = e.wheelDeltaX / 12;\n			wheelDeltaY = e.wheelDeltaY / 12;\n		} else if('wheelDelta' in e) {\n			wheelDeltaX = wheelDeltaY = e.wheelDelta / 12;\n		} else if ('detail' in e) {\n			wheelDeltaX = wheelDeltaY = -e.detail * 3;\n		} else {\n			return;\n		}\n		\n		if (that.options.wheelAction == 'zoom') {\n			deltaScale = that.scale * Math.pow(2, 1/3 * (wheelDeltaY ? wheelDeltaY / Math.abs(wheelDeltaY) : 0));\n			if (deltaScale < that.options.zoomMin) deltaScale = that.options.zoomMin;\n			if (deltaScale > that.options.zoomMax) deltaScale = that.options.zoomMax;\n			\n			if (deltaScale != that.scale) {\n				if (!that.wheelZoomCount && that.options.onZoomStart) that.options.onZoomStart.call(that, e);\n				that.wheelZoomCount++;\n				\n				that.zoom(e.pageX, e.pageY, deltaScale, 400);\n				\n				setTimeout(function() {\n					that.wheelZoomCount--;\n					if (!that.wheelZoomCount && that.options.onZoomEnd) that.options.onZoomEnd.call(that, e);\n				}, 400);\n			}\n			\n			return;\n		}\n		\n		deltaX = that.x + wheelDeltaX;\n		deltaY = that.y + wheelDeltaY;\n\n		if (deltaX > 0) deltaX = 0;\n		else if (deltaX < that.maxScrollX) deltaX = that.maxScrollX;\n\n		if (deltaY > that.minScrollY) deltaY = that.minScrollY;\n		else if (deltaY < that.maxScrollY) deltaY = that.maxScrollY;\n    \n		if (that.maxScrollY < 0) {\n			that.scrollTo(deltaX, deltaY, 0);\n		}\n	},\n	\n	_transitionEnd: function (e) {\n		var that = this;\n\n		if (e.target != that.scroller) return;\n\n		that._unbind(TRNEND_EV);\n		\n		that._startAni();\n	},\n\n\n	/**\n	*\n	* Utilities\n	*\n	*/\n	_startAni: function () {\n		var that = this,\n			startX = that.x, startY = that.y,\n			startTime = Date.now(),\n			step, easeOut,\n			animate;\n\n		if (that.animating) return;\n		\n		if (!that.steps.length) {\n			that._resetPos(400);\n			return;\n		}\n		\n		step = that.steps.shift();\n		\n		if (step.x == startX && step.y == startY) step.time = 0;\n\n		that.animating = true;\n		that.moved = true;\n		\n		if (that.options.useTransition) {\n			that._transitionTime(step.time);\n			that._pos(step.x, step.y);\n			that.animating = false;\n			if (step.time) that._bind(TRNEND_EV);\n			else that._resetPos(0);\n			return;\n		}\n\n		animate = function () {\n			var now = Date.now(),\n				newX, newY;\n\n			if (now >= startTime + step.time) {\n				that._pos(step.x, step.y);\n				that.animating = false;\n				if (that.options.onAnimationEnd) that.options.onAnimationEnd.call(that);			// Execute custom code on animation end\n				that._startAni();\n				return;\n			}\n\n			now = (now - startTime) / step.time - 1;\n			easeOut = m.sqrt(1 - now * now);\n			newX = (step.x - startX) * easeOut + startX;\n			newY = (step.y - startY) * easeOut + startY;\n			that._pos(newX, newY);\n			if (that.animating) that.aniTime = nextFrame(animate);\n		};\n\n		animate();\n	},\n\n	_transitionTime: function (time) {\n		time += 'ms';\n		this.scroller.style[transitionDuration] = time;\n		if (this.hScrollbar) this.hScrollbarIndicator.style[transitionDuration] = time;\n		if (this.vScrollbar) this.vScrollbarIndicator.style[transitionDuration] = time;\n	},\n\n	_momentum: function (dist, time, maxDistUpper, maxDistLower, size) {\n		var deceleration = 0.0006,\n			speed = m.abs(dist) / time,\n			newDist = (speed * speed) / (2 * deceleration),\n			newTime = 0, outsideDist = 0;\n\n		// Proportinally reduce speed if we are outside of the boundaries\n		if (dist > 0 && newDist > maxDistUpper) {\n			outsideDist = size / (6 / (newDist / speed * deceleration));\n			maxDistUpper = maxDistUpper + outsideDist;\n			speed = speed * maxDistUpper / newDist;\n			newDist = maxDistUpper;\n		} else if (dist < 0 && newDist > maxDistLower) {\n			outsideDist = size / (6 / (newDist / speed * deceleration));\n			maxDistLower = maxDistLower + outsideDist;\n			speed = speed * maxDistLower / newDist;\n			newDist = maxDistLower;\n		}\n\n		newDist = newDist * (dist < 0 ? -1 : 1);\n		newTime = speed / deceleration;\n\n		return { dist: newDist, time: m.round(newTime) };\n	},\n\n	_offset: function (el) {\n		var left = -el.offsetLeft,\n			top = -el.offsetTop;\n			\n		while (el = el.offsetParent) {\n			left -= el.offsetLeft;\n			top -= el.offsetTop;\n		}\n		\n		if (el != this.wrapper) {\n			left *= this.scale;\n			top *= this.scale;\n		}\n\n		return { left: left, top: top };\n	},\n\n	_snap: function (x, y) {\n		var that = this,\n			i, l,\n			page, time,\n			sizeX, sizeY;\n\n		// Check page X\n		page = that.pagesX.length - 1;\n		for (i=0, l=that.pagesX.length; i<l; i++) {\n			if (x >= that.pagesX[i]) {\n				page = i;\n				break;\n			}\n		}\n		if (page == that.currPageX && page > 0 && that.dirX < 0) page--;\n		x = that.pagesX[page];\n		sizeX = m.abs(x - that.pagesX[that.currPageX]);\n		sizeX = sizeX ? m.abs(that.x - x) / sizeX * 500 : 0;\n		that.currPageX = page;\n\n		// Check page Y\n		page = that.pagesY.length-1;\n		for (i=0; i<page; i++) {\n			if (y >= that.pagesY[i]) {\n				page = i;\n				break;\n			}\n		}\n		if (page == that.currPageY && page > 0 && that.dirY < 0) page--;\n		y = that.pagesY[page];\n		sizeY = m.abs(y - that.pagesY[that.currPageY]);\n		sizeY = sizeY ? m.abs(that.y - y) / sizeY * 500 : 0;\n		that.currPageY = page;\n\n		// Snap with constant speed (proportional duration)\n		time = m.round(m.max(sizeX, sizeY)) || 200;\n\n		return { x: x, y: y, time: time };\n	},\n\n	_bind: function (type, el, bubble) {\n		(el || this.scroller).addEventListener(type, this, !!bubble);\n	},\n\n	_unbind: function (type, el, bubble) {\n		(el || this.scroller).removeEventListener(type, this, !!bubble);\n	},\n\n\n	/**\n	*\n	* Public methods\n	*\n	*/\n	destroy: function () {\n		var that = this;\n\n		that.scroller.style[transform] = '';\n\n		// Remove the scrollbars\n		that.hScrollbar = false;\n		that.vScrollbar = false;\n		that._scrollbar('h');\n		that._scrollbar('v');\n\n		// Remove the event listeners\n		that._unbind(RESIZE_EV, window);\n		that._unbind(START_EV);\n		that._unbind(MOVE_EV, window);\n		that._unbind(END_EV, window);\n		that._unbind(CANCEL_EV, window);\n		\n		if (!that.options.hasTouch) {\n			that._unbind('DOMMouseScroll');\n			that._unbind('mousewheel');\n		}\n		\n		if (that.options.useTransition) that._unbind(TRNEND_EV);\n		\n		if (that.options.checkDOMChanges) clearInterval(that.checkDOMTime);\n		\n		if (that.options.onDestroy) that.options.onDestroy.call(that);\n	},\n\n	refresh: function () {\n		var that = this,\n			offset,\n			i, l,\n			els,\n			pos = 0,\n			page = 0;\n\n		if (that.scale < that.options.zoomMin) that.scale = that.options.zoomMin;\n		that.wrapperW = that.wrapper.clientWidth || 1;\n		that.wrapperH = that.wrapper.clientHeight || 1;\n\n		that.minScrollY = -that.options.topOffset || 0;\n		that.scrollerW = m.round(that.scroller.offsetWidth * that.scale);\n		that.scrollerH = m.round((that.scroller.offsetHeight + that.minScrollY) * that.scale);\n		that.maxScrollX = that.wrapperW - that.scrollerW;\n		that.maxScrollY = that.wrapperH - that.scrollerH + that.minScrollY;\n		that.dirX = 0;\n		that.dirY = 0;\n\n		if (that.options.onRefresh) that.options.onRefresh.call(that);\n\n		that.hScroll = that.options.hScroll && that.maxScrollX < 0;\n		that.vScroll = that.options.vScroll && (!that.options.bounceLock && !that.hScroll || that.scrollerH > that.wrapperH);\n\n		that.hScrollbar = that.hScroll && that.options.hScrollbar;\n		that.vScrollbar = that.vScroll && that.options.vScrollbar && that.scrollerH > that.wrapperH;\n\n		offset = that._offset(that.wrapper);\n		that.wrapperOffsetLeft = -offset.left;\n		that.wrapperOffsetTop = -offset.top;\n\n		// Prepare snap\n		if (typeof that.options.snap == 'string') {\n			that.pagesX = [];\n			that.pagesY = [];\n			els = that.scroller.querySelectorAll(that.options.snap);\n			for (i=0, l=els.length; i<l; i++) {\n				pos = that._offset(els[i]);\n				pos.left += that.wrapperOffsetLeft;\n				pos.top += that.wrapperOffsetTop;\n				that.pagesX[i] = pos.left < that.maxScrollX ? that.maxScrollX : pos.left * that.scale;\n				that.pagesY[i] = pos.top < that.maxScrollY ? that.maxScrollY : pos.top * that.scale;\n			}\n		} else if (that.options.snap) {\n			that.pagesX = [];\n			while (pos >= that.maxScrollX) {\n				that.pagesX[page] = pos;\n				pos = pos - that.wrapperW;\n				page++;\n			}\n			if (that.maxScrollX%that.wrapperW) that.pagesX[that.pagesX.length] = that.maxScrollX - that.pagesX[that.pagesX.length-1] + that.pagesX[that.pagesX.length-1];\n\n			pos = 0;\n			page = 0;\n			that.pagesY = [];\n			while (pos >= that.maxScrollY) {\n				that.pagesY[page] = pos;\n				pos = pos - that.wrapperH;\n				page++;\n			}\n			if (that.maxScrollY%that.wrapperH) that.pagesY[that.pagesY.length] = that.maxScrollY - that.pagesY[that.pagesY.length-1] + that.pagesY[that.pagesY.length-1];\n		}\n\n		// Prepare the scrollbars\n		that._scrollbar('h');\n		that._scrollbar('v');\n\n		if (!that.zoomed) {\n			that.scroller.style[transitionDuration] = '0';\n			that._resetPos(400);\n		}\n	},\n\n	scrollTo: function (x, y, time, relative) {\n		var that = this,\n			step = x,\n			i, l;\n\n		that.stop();\n\n		if (!step.length) step = [{ x: x, y: y, time: time, relative: relative }];\n		\n		for (i=0, l=step.length; i<l; i++) {\n			if (step[i].relative) { step[i].x = that.x - step[i].x; step[i].y = that.y - step[i].y; }\n			that.steps.push({ x: step[i].x, y: step[i].y, time: step[i].time || 0 });\n		}\n\n		that._startAni();\n	},\n\n	scrollToElement: function (el, time) {\n		var that = this, pos;\n		el = el.nodeType ? el : that.scroller.querySelector(el);\n		if (!el) return;\n\n		pos = that._offset(el);\n		pos.left += that.wrapperOffsetLeft;\n		pos.top += that.wrapperOffsetTop;\n\n		pos.left = pos.left > 0 ? 0 : pos.left < that.maxScrollX ? that.maxScrollX : pos.left;\n		pos.top = pos.top > that.minScrollY ? that.minScrollY : pos.top < that.maxScrollY ? that.maxScrollY : pos.top;\n		time = time === undefined ? m.max(m.abs(pos.left)*2, m.abs(pos.top)*2) : time;\n\n		that.scrollTo(pos.left, pos.top, time);\n	},\n\n	scrollToPage: function (pageX, pageY, time) {\n		var that = this, x, y;\n		\n		time = time === undefined ? 400 : time;\n\n		if (that.options.onScrollStart) that.options.onScrollStart.call(that);\n\n		if (that.options.snap) {\n			pageX = pageX == 'next' ? that.currPageX+1 : pageX == 'prev' ? that.currPageX-1 : pageX;\n			pageY = pageY == 'next' ? that.currPageY+1 : pageY == 'prev' ? that.currPageY-1 : pageY;\n\n			pageX = pageX < 0 ? 0 : pageX > that.pagesX.length-1 ? that.pagesX.length-1 : pageX;\n			pageY = pageY < 0 ? 0 : pageY > that.pagesY.length-1 ? that.pagesY.length-1 : pageY;\n\n			that.currPageX = pageX;\n			that.currPageY = pageY;\n			x = that.pagesX[pageX];\n			y = that.pagesY[pageY];\n		} else {\n			x = -that.wrapperW * pageX;\n			y = -that.wrapperH * pageY;\n			if (x < that.maxScrollX) x = that.maxScrollX;\n			if (y < that.maxScrollY) y = that.maxScrollY;\n		}\n\n		that.scrollTo(x, y, time);\n	},\n\n	disable: function () {\n		this.stop();\n		this._resetPos(0);\n		this.enabled = false;\n\n		// If disabled after touchstart we make sure that there are no left over events\n		this._unbind(MOVE_EV, window);\n		this._unbind(END_EV, window);\n		this._unbind(CANCEL_EV, window);\n	},\n	\n	enable: function () {\n		this.enabled = true;\n	},\n	\n	stop: function () {\n		if (this.options.useTransition) this._unbind(TRNEND_EV);\n		else cancelFrame(this.aniTime);\n		this.steps = [];\n		this.moved = false;\n		this.animating = false;\n	},\n	\n	zoom: function (x, y, scale, time) {\n		var that = this,\n			relScale = scale / that.scale;\n\n		if (!that.options.useTransform) return;\n\n		that.zoomed = true;\n		time = time === undefined ? 200 : time;\n		x = x - that.wrapperOffsetLeft - that.x;\n		y = y - that.wrapperOffsetTop - that.y;\n		that.x = x - x * relScale + that.x;\n		that.y = y - y * relScale + that.y;\n\n		that.scale = scale;\n		that.refresh();\n\n		that.x = that.x > 0 ? 0 : that.x < that.maxScrollX ? that.maxScrollX : that.x;\n		that.y = that.y > that.minScrollY ? that.minScrollY : that.y < that.maxScrollY ? that.maxScrollY : that.y;\n\n		that.scroller.style[transitionDuration] = time + 'ms';\n		that.scroller.style[transform] = 'translate(' + that.x + 'px,' + that.y + 'px) scale(' + scale + ')' + translateZ;\n		that.zoomed = false;\n	},\n	\n	isReady: function () {\n		return !this.moved && !this.zoomed && !this.animating;\n	}\n};\n\nfunction prefixStyle (style) {\n	if ( vendor === '' ) return style;\n\n	style = style.charAt(0).toUpperCase() + style.substr(1);\n	return vendor + style;\n}\n\ndummyStyle = null;	// for the sake of it\n\nif (true) exports.iScroll = iScroll;\nelse window.iScroll = iScroll;\n\n})(window, document);\n\n\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly8vLi96eC9qcy9pc2Nyb2xsLmpzP2JlZWMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUEsU0FBUyxPQUFPO0FBQ2hCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFO0FBQ0Y7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHVCQUF1QixnQ0FBZ0M7QUFDdkQsRUFBRTtBQUNGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxzQ0FBc0Msb0JBQW9CLEVBQUU7QUFDNUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSx3Q0FBd0Msa0JBQWtCLHFCQUFxQjs7QUFFL0U7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwrQkFBK0I7QUFDL0I7QUFDQSxnQ0FBZ0M7QUFDaEMsa0NBQWtDO0FBQ2xDLDREQUE0RDtBQUM1RCwwQ0FBMEM7QUFDMUM7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsK0NBQStDLFlBQVksOEJBQThCLFdBQVcsU0FBUyw0REFBNEQsK0NBQStDLFFBQVE7O0FBRWhPLDBCQUEwQixvQkFBb0IsNkNBQTZDLDBGQUEwRixnQkFBZ0I7O0FBRXJNO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsMkNBQTJDLFlBQVksMkJBQTJCLHVDQUF1Qyw2Q0FBNkMsdUNBQXVDLG9EQUFvRCxtQ0FBbUM7QUFDcFM7QUFDQSwwQkFBMEIsb0JBQW9CLGdFQUFnRSwyRUFBMkUsdUNBQXVDO0FBQ2hPLDBEQUEwRDs7QUFFMUQ7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBLDBCQUEwQixnQkFBZ0IsRUFBRTtBQUM1QyxFQUFFOztBQUVGO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLElBQUk7QUFDSjtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQSwwQkFBMEI7QUFDMUI7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSxnQkFBZ0IsaUJBQWlCO0FBQ2pDLGdCQUFnQixpQkFBaUI7QUFDakM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE9BQU8sT0FBTztBQUNkO0FBQ0EsS0FBSztBQUNMO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLE1BQU07QUFDTjtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSw0R0FBNEc7QUFDNUcsd0lBQXdJO0FBQ3hJOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpR0FBaUcsb0RBQW9EO0FBQ3JKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHNFQUFzRTtBQUN0RTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0EsR0FBRztBQUNIO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTDs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTs7QUFFQTs7QUFFQTs7QUFFQTtBQUNBLEVBQUU7OztBQUdGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQSw0RUFBNEU7QUFDNUU7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUEsVUFBVTtBQUNWLEVBQUU7O0FBRUY7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBOztBQUVBLFVBQVU7QUFDVixFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBLGlDQUFpQyxLQUFLO0FBQ3RDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQSxXQUFXLFFBQVE7QUFDbkI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQSxVQUFVO0FBQ1YsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7O0FBR0Y7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7O0FBRUE7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwwQkFBMEIsS0FBSztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQSw2QkFBNkIsNkNBQTZDOztBQUUxRSwwQkFBMEIsS0FBSztBQUMvQiwwQkFBMEIsZ0NBQWdDLGdDQUFnQztBQUMxRixvQkFBb0Isc0RBQXNEO0FBQzFFOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTtBQUNBOztBQUVBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBOztBQUVBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0EsRUFBRTs7QUFFRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxFQUFFOztBQUVGO0FBQ0E7QUFDQTs7QUFFQTs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLEVBQUU7O0FBRUY7QUFDQTtBQUNBO0FBQ0E7O0FBRUE7QUFDQTs7QUFFQTtBQUNBO0FBQ0E7O0FBRUEsa0JBQWtCOztBQUVsQjtBQUNBOztBQUVBLENBQUMiLCJmaWxlIjoiOC5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qKiogSU1QT1JUUyBGUk9NIGltcG9ydHMtbG9hZGVyICoqKi9cbnZhciBkZWZpbmUgPSBmYWxzZTtcblxuLyohXG4gKiBpU2Nyb2xsIHY0LjIuNSB+IENvcHlyaWdodCAoYykgMjAxMiBNYXR0ZW8gU3BpbmVsbGksIGh0dHA6Ly9jdWJpcS5vcmdcbiAqIFJlbGVhc2VkIHVuZGVyIE1JVCBsaWNlbnNlLCBodHRwOi8vY3ViaXEub3JnL2xpY2Vuc2VcbiAqL1xuKGZ1bmN0aW9uKHdpbmRvdywgZG9jKXtcbnZhciBtID0gTWF0aCxcblx0ZHVtbXlTdHlsZSA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKS5zdHlsZSxcblx0dmVuZG9yID0gKGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdmVuZG9ycyA9ICd0LHdlYmtpdFQsTW96VCxtc1QsT1QnLnNwbGl0KCcsJyksXG5cdFx0XHR0LFxuXHRcdFx0aSA9IDAsXG5cdFx0XHRsID0gdmVuZG9ycy5sZW5ndGg7XG5cblx0XHRmb3IgKCA7IGkgPCBsOyBpKysgKSB7XG5cdFx0XHR0ID0gdmVuZG9yc1tpXSArICdyYW5zZm9ybSc7XG5cdFx0XHRpZiAoIHQgaW4gZHVtbXlTdHlsZSApIHtcblx0XHRcdFx0cmV0dXJuIHZlbmRvcnNbaV0uc3Vic3RyKDAsIHZlbmRvcnNbaV0ubGVuZ3RoIC0gMSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0cmV0dXJuIGZhbHNlO1xuXHR9KSgpLFxuXHRjc3NWZW5kb3IgPSB2ZW5kb3IgPyAnLScgKyB2ZW5kb3IudG9Mb3dlckNhc2UoKSArICctJyA6ICcnLFxuXG5cdC8vIFN0eWxlIHByb3BlcnRpZXNcblx0dHJhbnNmb3JtID0gcHJlZml4U3R5bGUoJ3RyYW5zZm9ybScpLFxuXHR0cmFuc2l0aW9uUHJvcGVydHkgPSBwcmVmaXhTdHlsZSgndHJhbnNpdGlvblByb3BlcnR5JyksXG5cdHRyYW5zaXRpb25EdXJhdGlvbiA9IHByZWZpeFN0eWxlKCd0cmFuc2l0aW9uRHVyYXRpb24nKSxcblx0dHJhbnNmb3JtT3JpZ2luID0gcHJlZml4U3R5bGUoJ3RyYW5zZm9ybU9yaWdpbicpLFxuXHR0cmFuc2l0aW9uVGltaW5nRnVuY3Rpb24gPSBwcmVmaXhTdHlsZSgndHJhbnNpdGlvblRpbWluZ0Z1bmN0aW9uJyksXG5cdHRyYW5zaXRpb25EZWxheSA9IHByZWZpeFN0eWxlKCd0cmFuc2l0aW9uRGVsYXknKSxcblxuICAgIC8vIEJyb3dzZXIgY2FwYWJpbGl0aWVzXG5cdGlzQW5kcm9pZCA9ICgvYW5kcm9pZC9naSkudGVzdChuYXZpZ2F0b3IuYXBwVmVyc2lvbiksXG5cdGlzSURldmljZSA9ICgvaXBob25lfGlwYWQvZ2kpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pLFxuXHRpc1RvdWNoUGFkID0gKC9ocC10YWJsZXQvZ2kpLnRlc3QobmF2aWdhdG9yLmFwcFZlcnNpb24pLFxuXG4gICAgaGFzM2QgPSBwcmVmaXhTdHlsZSgncGVyc3BlY3RpdmUnKSBpbiBkdW1teVN0eWxlLFxuICAgIGhhc1RvdWNoID0gJ29udG91Y2hzdGFydCcgaW4gd2luZG93ICYmICFpc1RvdWNoUGFkLFxuICAgIGhhc1RyYW5zZm9ybSA9IHZlbmRvciAhPT0gZmFsc2UsXG4gICAgaGFzVHJhbnNpdGlvbkVuZCA9IHByZWZpeFN0eWxlKCd0cmFuc2l0aW9uJykgaW4gZHVtbXlTdHlsZSxcblxuXHRSRVNJWkVfRVYgPSAnb25vcmllbnRhdGlvbmNoYW5nZScgaW4gd2luZG93ID8gJ29yaWVudGF0aW9uY2hhbmdlJyA6ICdyZXNpemUnLFxuXHRTVEFSVF9FViA9IGhhc1RvdWNoID8gJ3RvdWNoc3RhcnQnIDogJ21vdXNlZG93bicsXG5cdE1PVkVfRVYgPSBoYXNUb3VjaCA/ICd0b3VjaG1vdmUnIDogJ21vdXNlbW92ZScsXG5cdEVORF9FViA9IGhhc1RvdWNoID8gJ3RvdWNoZW5kJyA6ICdtb3VzZXVwJyxcblx0Q0FOQ0VMX0VWID0gaGFzVG91Y2ggPyAndG91Y2hjYW5jZWwnIDogJ21vdXNldXAnLFxuXHRUUk5FTkRfRVYgPSAoZnVuY3Rpb24gKCkge1xuXHRcdGlmICggdmVuZG9yID09PSBmYWxzZSApIHJldHVybiBmYWxzZTtcblxuXHRcdHZhciB0cmFuc2l0aW9uRW5kID0ge1xuXHRcdFx0XHQnJ1x0XHRcdDogJ3RyYW5zaXRpb25lbmQnLFxuXHRcdFx0XHQnd2Via2l0J1x0OiAnd2Via2l0VHJhbnNpdGlvbkVuZCcsXG5cdFx0XHRcdCdNb3onXHRcdDogJ3RyYW5zaXRpb25lbmQnLFxuXHRcdFx0XHQnTydcdFx0XHQ6ICdvdHJhbnNpdGlvbmVuZCcsXG5cdFx0XHRcdCdtcydcdFx0OiAnTVNUcmFuc2l0aW9uRW5kJ1xuXHRcdFx0fTtcblxuXHRcdHJldHVybiB0cmFuc2l0aW9uRW5kW3ZlbmRvcl07XG5cdH0pKCksXG5cblx0bmV4dEZyYW1lID0gKGZ1bmN0aW9uKCkge1xuXHRcdHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cud2Via2l0UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cubW96UmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cub1JlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHRcdFx0d2luZG93Lm1zUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHRmdW5jdGlvbihjYWxsYmFjaykgeyByZXR1cm4gc2V0VGltZW91dChjYWxsYmFjaywgMSk7IH07XG5cdH0pKCksXG5cdGNhbmNlbEZyYW1lID0gKGZ1bmN0aW9uICgpIHtcblx0XHRyZXR1cm4gd2luZG93LmNhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHRcdFx0d2luZG93LndlYmtpdENhbmNlbEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cud2Via2l0Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cubW96Q2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHR3aW5kb3cub0NhbmNlbFJlcXVlc3RBbmltYXRpb25GcmFtZSB8fFxuXHRcdFx0d2luZG93Lm1zQ2FuY2VsUmVxdWVzdEFuaW1hdGlvbkZyYW1lIHx8XG5cdFx0XHRjbGVhclRpbWVvdXQ7XG5cdH0pKCksXG5cblx0Ly8gSGVscGVyc1xuXHR0cmFuc2xhdGVaID0gaGFzM2QgPyAnIHRyYW5zbGF0ZVooMCknIDogJycsXG5cblx0Ly8gQ29uc3RydWN0b3Jcblx0aVNjcm9sbCA9IGZ1bmN0aW9uIChlbCwgb3B0aW9ucykge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdGk7XG5cblx0XHR0aGF0LndyYXBwZXIgPSB0eXBlb2YgZWwgPT0gJ29iamVjdCcgPyBlbCA6IGRvYy5nZXRFbGVtZW50QnlJZChlbCk7XG5cdFx0dGhhdC53cmFwcGVyLnN0eWxlLm92ZXJmbG93ID0gJ2hpZGRlbic7XG5cdFx0dGhhdC5zY3JvbGxlciA9IHRoYXQud3JhcHBlci5jaGlsZHJlblswXTtcblxuXHRcdC8vIERlZmF1bHQgb3B0aW9uc1xuXHRcdHRoYXQub3B0aW9ucyA9IHtcblx0XHRcdGhTY3JvbGw6IHRydWUsXG5cdFx0XHR2U2Nyb2xsOiB0cnVlLFxuXHRcdFx0eDogMCxcblx0XHRcdHk6IDAsXG5cdFx0XHRib3VuY2U6IHRydWUsXG5cdFx0XHRib3VuY2VMb2NrOiBmYWxzZSxcblx0XHRcdG1vbWVudHVtOiB0cnVlLFxuXHRcdFx0bG9ja0RpcmVjdGlvbjogdHJ1ZSxcblx0XHRcdHVzZVRyYW5zZm9ybTogdHJ1ZSxcblx0XHRcdHVzZVRyYW5zaXRpb246IGZhbHNlLFxuXHRcdFx0dG9wT2Zmc2V0OiAwLFxuXHRcdFx0Y2hlY2tET01DaGFuZ2VzOiBmYWxzZSxcdFx0Ly8gRXhwZXJpbWVudGFsXG5cdFx0XHRoYW5kbGVDbGljazogdHJ1ZSxcblxuXHRcdFx0Ly8gU2Nyb2xsYmFyXG5cdFx0XHRoU2Nyb2xsYmFyOiB0cnVlLFxuXHRcdFx0dlNjcm9sbGJhcjogdHJ1ZSxcblx0XHRcdGZpeGVkU2Nyb2xsYmFyOiBpc0FuZHJvaWQsXG5cdFx0XHRoaWRlU2Nyb2xsYmFyOiBpc0lEZXZpY2UsXG5cdFx0XHRmYWRlU2Nyb2xsYmFyOiBpc0lEZXZpY2UgJiYgaGFzM2QsXG5cdFx0XHRzY3JvbGxiYXJDbGFzczogJycsXG5cblx0XHRcdC8vIFpvb21cblx0XHRcdHpvb206IGZhbHNlLFxuXHRcdFx0em9vbU1pbjogMSxcblx0XHRcdHpvb21NYXg6IDQsXG5cdFx0XHRkb3VibGVUYXBab29tOiAyLFxuXHRcdFx0d2hlZWxBY3Rpb246ICdzY3JvbGwnLFxuXG5cdFx0XHQvLyBTbmFwXG5cdFx0XHRzbmFwOiBmYWxzZSxcblx0XHRcdHNuYXBUaHJlc2hvbGQ6IDEsXG5cblx0XHRcdC8vIEV2ZW50c1xuXHRcdFx0b25SZWZyZXNoOiBudWxsLFxuXHRcdFx0b25CZWZvcmVTY3JvbGxTdGFydDogZnVuY3Rpb24gKGUpIHsgZS5wcmV2ZW50RGVmYXVsdCgpOyB9LFxuXHRcdFx0b25TY3JvbGxTdGFydDogbnVsbCxcblx0XHRcdG9uQmVmb3JlU2Nyb2xsTW92ZTogbnVsbCxcblx0XHRcdG9uU2Nyb2xsTW92ZTogbnVsbCxcblx0XHRcdG9uQmVmb3JlU2Nyb2xsRW5kOiBudWxsLFxuXHRcdFx0b25TY3JvbGxFbmQ6IG51bGwsXG5cdFx0XHRvblRvdWNoRW5kOiBudWxsLFxuXHRcdFx0b25EZXN0cm95OiBudWxsLFxuXHRcdFx0b25ab29tU3RhcnQ6IG51bGwsXG5cdFx0XHRvblpvb206IG51bGwsXG5cdFx0XHRvblpvb21FbmQ6IG51bGxcblx0XHR9O1xuXG5cdFx0Ly8gVXNlciBkZWZpbmVkIG9wdGlvbnNcblx0XHRmb3IgKGkgaW4gb3B0aW9ucykgdGhhdC5vcHRpb25zW2ldID0gb3B0aW9uc1tpXTtcblx0XHRcblx0XHQvLyBTZXQgc3RhcnRpbmcgcG9zaXRpb25cblx0XHR0aGF0LnggPSB0aGF0Lm9wdGlvbnMueDtcblx0XHR0aGF0LnkgPSB0aGF0Lm9wdGlvbnMueTtcblxuXHRcdC8vIE5vcm1hbGl6ZSBvcHRpb25zXG5cdFx0dGhhdC5vcHRpb25zLnVzZVRyYW5zZm9ybSA9IGhhc1RyYW5zZm9ybSAmJiB0aGF0Lm9wdGlvbnMudXNlVHJhbnNmb3JtO1xuXHRcdHRoYXQub3B0aW9ucy5oU2Nyb2xsYmFyID0gdGhhdC5vcHRpb25zLmhTY3JvbGwgJiYgdGhhdC5vcHRpb25zLmhTY3JvbGxiYXI7XG5cdFx0dGhhdC5vcHRpb25zLnZTY3JvbGxiYXIgPSB0aGF0Lm9wdGlvbnMudlNjcm9sbCAmJiB0aGF0Lm9wdGlvbnMudlNjcm9sbGJhcjtcblx0XHR0aGF0Lm9wdGlvbnMuem9vbSA9IHRoYXQub3B0aW9ucy51c2VUcmFuc2Zvcm0gJiYgdGhhdC5vcHRpb25zLnpvb207XG5cdFx0dGhhdC5vcHRpb25zLnVzZVRyYW5zaXRpb24gPSBoYXNUcmFuc2l0aW9uRW5kICYmIHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uO1xuXG5cdFx0Ly8gSGVscGVycyBGSVggQU5EUk9JRCBCVUchXG5cdFx0Ly8gdHJhbnNsYXRlM2QgYW5kIHNjYWxlIGRvZXNuJ3Qgd29yayB0b2dldGhlciFcblx0XHQvLyBJZ25vcmluZyAzZCBPTkxZIFdIRU4gWU9VIFNFVCB0aGF0Lm9wdGlvbnMuem9vbVxuXHRcdGlmICggdGhhdC5vcHRpb25zLnpvb20gJiYgaXNBbmRyb2lkICl7XG5cdFx0XHR0cmFuc2xhdGVaID0gJyc7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIFNldCBzb21lIGRlZmF1bHQgc3R5bGVzXG5cdFx0dGhhdC5zY3JvbGxlci5zdHlsZVt0cmFuc2l0aW9uUHJvcGVydHldID0gdGhhdC5vcHRpb25zLnVzZVRyYW5zZm9ybSA/IGNzc1ZlbmRvciArICd0cmFuc2Zvcm0nIDogJ3RvcCBsZWZ0Jztcblx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zaXRpb25EdXJhdGlvbl0gPSAnMCc7XG5cdFx0dGhhdC5zY3JvbGxlci5zdHlsZVt0cmFuc2Zvcm1PcmlnaW5dID0gJzAgMCc7XG5cdFx0aWYgKHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zaXRpb25UaW1pbmdGdW5jdGlvbl0gPSAnY3ViaWMtYmV6aWVyKDAuMzMsMC42NiwwLjY2LDEpJztcblx0XHRcblx0XHRpZiAodGhhdC5vcHRpb25zLnVzZVRyYW5zZm9ybSkgdGhhdC5zY3JvbGxlci5zdHlsZVt0cmFuc2Zvcm1dID0gJ3RyYW5zbGF0ZSgnICsgdGhhdC54ICsgJ3B4LCcgKyB0aGF0LnkgKyAncHgpJyArIHRyYW5zbGF0ZVo7XG5cdFx0ZWxzZSB0aGF0LnNjcm9sbGVyLnN0eWxlLmNzc1RleHQgKz0gJztwb3NpdGlvbjphYnNvbHV0ZTt0b3A6JyArIHRoYXQueSArICdweDtsZWZ0OicgKyB0aGF0LnggKyAncHgnO1xuXG5cdFx0aWYgKHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB0aGF0Lm9wdGlvbnMuZml4ZWRTY3JvbGxiYXIgPSB0cnVlO1xuXG5cdFx0dGhhdC5yZWZyZXNoKCk7XG5cblx0XHR0aGF0Ll9iaW5kKFJFU0laRV9FViwgd2luZG93KTtcblx0XHR0aGF0Ll9iaW5kKFNUQVJUX0VWKTtcblx0XHRpZiAoIWhhc1RvdWNoKSB7XG5cdFx0XHRpZiAodGhhdC5vcHRpb25zLndoZWVsQWN0aW9uICE9ICdub25lJykge1xuXHRcdFx0XHR0aGF0Ll9iaW5kKCdET01Nb3VzZVNjcm9sbCcpO1xuXHRcdFx0XHR0aGF0Ll9iaW5kKCdtb3VzZXdoZWVsJyk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0aWYgKHRoYXQub3B0aW9ucy5jaGVja0RPTUNoYW5nZXMpIHRoYXQuY2hlY2tET01UaW1lID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXHRcdFx0dGhhdC5fY2hlY2tET01DaGFuZ2VzKCk7XG5cdFx0fSwgNTAwKTtcblx0fTtcblxuLy8gUHJvdG90eXBlXG5pU2Nyb2xsLnByb3RvdHlwZSA9IHtcblx0ZW5hYmxlZDogdHJ1ZSxcblx0eDogMCxcblx0eTogMCxcblx0c3RlcHM6IFtdLFxuXHRzY2FsZTogMSxcblx0Y3VyclBhZ2VYOiAwLCBjdXJyUGFnZVk6IDAsXG5cdHBhZ2VzWDogW10sIHBhZ2VzWTogW10sXG5cdGFuaVRpbWU6IG51bGwsXG5cdHdoZWVsWm9vbUNvdW50OiAwLFxuXHRcblx0aGFuZGxlRXZlbnQ6IGZ1bmN0aW9uIChlKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzO1xuXHRcdHN3aXRjaChlLnR5cGUpIHtcblx0XHRcdGNhc2UgU1RBUlRfRVY6XG5cdFx0XHRcdGlmICghaGFzVG91Y2ggJiYgZS5idXR0b24gIT09IDApIHJldHVybjtcblx0XHRcdFx0dGhhdC5fc3RhcnQoZSk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0Y2FzZSBNT1ZFX0VWOiB0aGF0Ll9tb3ZlKGUpOyBicmVhaztcblx0XHRcdGNhc2UgRU5EX0VWOlxuXHRcdFx0Y2FzZSBDQU5DRUxfRVY6IHRoYXQuX2VuZChlKTsgYnJlYWs7XG5cdFx0XHRjYXNlIFJFU0laRV9FVjogdGhhdC5fcmVzaXplKCk7IGJyZWFrO1xuXHRcdFx0Y2FzZSAnRE9NTW91c2VTY3JvbGwnOiBjYXNlICdtb3VzZXdoZWVsJzogdGhhdC5fd2hlZWwoZSk7IGJyZWFrO1xuXHRcdFx0Y2FzZSBUUk5FTkRfRVY6IHRoYXQuX3RyYW5zaXRpb25FbmQoZSk7IGJyZWFrO1xuXHRcdH1cblx0fSxcblx0XG5cdF9jaGVja0RPTUNoYW5nZXM6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy5tb3ZlZCB8fCB0aGlzLnpvb21lZCB8fCB0aGlzLmFuaW1hdGluZyB8fFxuXHRcdFx0KHRoaXMuc2Nyb2xsZXJXID09IHRoaXMuc2Nyb2xsZXIub2Zmc2V0V2lkdGggKiB0aGlzLnNjYWxlICYmIHRoaXMuc2Nyb2xsZXJIID09IHRoaXMuc2Nyb2xsZXIub2Zmc2V0SGVpZ2h0ICogdGhpcy5zY2FsZSkpIHJldHVybjtcblxuXHRcdHRoaXMucmVmcmVzaCgpO1xuXHR9LFxuXHRcblx0X3Njcm9sbGJhcjogZnVuY3Rpb24gKGRpcikge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdGJhcjtcblxuXHRcdGlmICghdGhhdFtkaXIgKyAnU2Nyb2xsYmFyJ10pIHtcblx0XHRcdGlmICh0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10pIHtcblx0XHRcdFx0aWYgKGhhc1RyYW5zZm9ybSkgdGhhdFtkaXIgKyAnU2Nyb2xsYmFySW5kaWNhdG9yJ10uc3R5bGVbdHJhbnNmb3JtXSA9ICcnO1xuXHRcdFx0XHR0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10ucGFyZW50Tm9kZS5yZW1vdmVDaGlsZCh0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10pO1xuXHRcdFx0XHR0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10gPSBudWxsO1xuXHRcdFx0XHR0aGF0W2RpciArICdTY3JvbGxiYXJJbmRpY2F0b3InXSA9IG51bGw7XG5cdFx0XHR9XG5cblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHRpZiAoIXRoYXRbZGlyICsgJ1Njcm9sbGJhcldyYXBwZXInXSkge1xuXHRcdFx0Ly8gQ3JlYXRlIHRoZSBzY3JvbGxiYXIgd3JhcHBlclxuXHRcdFx0YmFyID0gZG9jLmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuXG5cdFx0XHRpZiAodGhhdC5vcHRpb25zLnNjcm9sbGJhckNsYXNzKSBiYXIuY2xhc3NOYW1lID0gdGhhdC5vcHRpb25zLnNjcm9sbGJhckNsYXNzICsgZGlyLnRvVXBwZXJDYXNlKCk7XG5cdFx0XHRlbHNlIGJhci5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTAwOycgKyAoZGlyID09ICdoJyA/ICdoZWlnaHQ6N3B4O2JvdHRvbToxcHg7bGVmdDoycHg7cmlnaHQ6JyArICh0aGF0LnZTY3JvbGxiYXIgPyAnNycgOiAnMicpICsgJ3B4JyA6ICd3aWR0aDo3cHg7Ym90dG9tOicgKyAodGhhdC5oU2Nyb2xsYmFyID8gJzcnIDogJzInKSArICdweDt0b3A6MnB4O3JpZ2h0OjFweCcpO1xuXG5cdFx0XHRiYXIuc3R5bGUuY3NzVGV4dCArPSAnO3BvaW50ZXItZXZlbnRzOm5vbmU7JyArIGNzc1ZlbmRvciArICd0cmFuc2l0aW9uLXByb3BlcnR5Om9wYWNpdHk7JyArIGNzc1ZlbmRvciArICd0cmFuc2l0aW9uLWR1cmF0aW9uOicgKyAodGhhdC5vcHRpb25zLmZhZGVTY3JvbGxiYXIgPyAnMzUwbXMnIDogJzAnKSArICc7b3ZlcmZsb3c6aGlkZGVuO29wYWNpdHk6JyArICh0aGF0Lm9wdGlvbnMuaGlkZVNjcm9sbGJhciA/ICcwJyA6ICcxJyk7XG5cblx0XHRcdHRoYXQud3JhcHBlci5hcHBlbmRDaGlsZChiYXIpO1xuXHRcdFx0dGhhdFtkaXIgKyAnU2Nyb2xsYmFyV3JhcHBlciddID0gYmFyO1xuXG5cdFx0XHQvLyBDcmVhdGUgdGhlIHNjcm9sbGJhciBpbmRpY2F0b3Jcblx0XHRcdGJhciA9IGRvYy5jcmVhdGVFbGVtZW50KCdkaXYnKTtcblx0XHRcdGlmICghdGhhdC5vcHRpb25zLnNjcm9sbGJhckNsYXNzKSB7XG5cdFx0XHRcdGJhci5zdHlsZS5jc3NUZXh0ID0gJ3Bvc2l0aW9uOmFic29sdXRlO3otaW5kZXg6MTAwO2JhY2tncm91bmQ6cmdiYSgwLDAsMCwwLjUpO2JvcmRlcjoxcHggc29saWQgcmdiYSgyNTUsMjU1LDI1NSwwLjkpOycgKyBjc3NWZW5kb3IgKyAnYmFja2dyb3VuZC1jbGlwOnBhZGRpbmctYm94OycgKyBjc3NWZW5kb3IgKyAnYm94LXNpemluZzpib3JkZXItYm94OycgKyAoZGlyID09ICdoJyA/ICdoZWlnaHQ6MTAwJScgOiAnd2lkdGg6MTAwJScpICsgJzsnICsgY3NzVmVuZG9yICsgJ2JvcmRlci1yYWRpdXM6M3B4O2JvcmRlci1yYWRpdXM6M3B4Jztcblx0XHRcdH1cblx0XHRcdGJhci5zdHlsZS5jc3NUZXh0ICs9ICc7cG9pbnRlci1ldmVudHM6bm9uZTsnICsgY3NzVmVuZG9yICsgJ3RyYW5zaXRpb24tcHJvcGVydHk6JyArIGNzc1ZlbmRvciArICd0cmFuc2Zvcm07JyArIGNzc1ZlbmRvciArICd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4zMywwLjY2LDAuNjYsMSk7JyArIGNzc1ZlbmRvciArICd0cmFuc2l0aW9uLWR1cmF0aW9uOjA7JyArIGNzc1ZlbmRvciArICd0cmFuc2Zvcm06IHRyYW5zbGF0ZSgwLDApJyArIHRyYW5zbGF0ZVo7XG5cdFx0XHRpZiAodGhhdC5vcHRpb25zLnVzZVRyYW5zaXRpb24pIGJhci5zdHlsZS5jc3NUZXh0ICs9ICc7JyArIGNzc1ZlbmRvciArICd0cmFuc2l0aW9uLXRpbWluZy1mdW5jdGlvbjpjdWJpYy1iZXppZXIoMC4zMywwLjY2LDAuNjYsMSknO1xuXG5cdFx0XHR0aGF0W2RpciArICdTY3JvbGxiYXJXcmFwcGVyJ10uYXBwZW5kQ2hpbGQoYmFyKTtcblx0XHRcdHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvciddID0gYmFyO1xuXHRcdH1cblxuXHRcdGlmIChkaXIgPT0gJ2gnKSB7XG5cdFx0XHR0aGF0LmhTY3JvbGxiYXJTaXplID0gdGhhdC5oU2Nyb2xsYmFyV3JhcHBlci5jbGllbnRXaWR0aDtcblx0XHRcdHRoYXQuaFNjcm9sbGJhckluZGljYXRvclNpemUgPSBtLm1heChtLnJvdW5kKHRoYXQuaFNjcm9sbGJhclNpemUgKiB0aGF0LmhTY3JvbGxiYXJTaXplIC8gdGhhdC5zY3JvbGxlclcpLCA4KTtcblx0XHRcdHRoYXQuaFNjcm9sbGJhckluZGljYXRvci5zdHlsZS53aWR0aCA9IHRoYXQuaFNjcm9sbGJhckluZGljYXRvclNpemUgKyAncHgnO1xuXHRcdFx0dGhhdC5oU2Nyb2xsYmFyTWF4U2Nyb2xsID0gdGhhdC5oU2Nyb2xsYmFyU2l6ZSAtIHRoYXQuaFNjcm9sbGJhckluZGljYXRvclNpemU7XG5cdFx0XHR0aGF0LmhTY3JvbGxiYXJQcm9wID0gdGhhdC5oU2Nyb2xsYmFyTWF4U2Nyb2xsIC8gdGhhdC5tYXhTY3JvbGxYO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHR0aGF0LnZTY3JvbGxiYXJTaXplID0gdGhhdC52U2Nyb2xsYmFyV3JhcHBlci5jbGllbnRIZWlnaHQ7XG5cdFx0XHR0aGF0LnZTY3JvbGxiYXJJbmRpY2F0b3JTaXplID0gbS5tYXgobS5yb3VuZCh0aGF0LnZTY3JvbGxiYXJTaXplICogdGhhdC52U2Nyb2xsYmFyU2l6ZSAvIHRoYXQuc2Nyb2xsZXJIKSwgOCk7XG5cdFx0XHR0aGF0LnZTY3JvbGxiYXJJbmRpY2F0b3Iuc3R5bGUuaGVpZ2h0ID0gdGhhdC52U2Nyb2xsYmFySW5kaWNhdG9yU2l6ZSArICdweCc7XG5cdFx0XHR0aGF0LnZTY3JvbGxiYXJNYXhTY3JvbGwgPSB0aGF0LnZTY3JvbGxiYXJTaXplIC0gdGhhdC52U2Nyb2xsYmFySW5kaWNhdG9yU2l6ZTtcblx0XHRcdHRoYXQudlNjcm9sbGJhclByb3AgPSB0aGF0LnZTY3JvbGxiYXJNYXhTY3JvbGwgLyB0aGF0Lm1heFNjcm9sbFk7XG5cdFx0fVxuXG5cdFx0Ly8gUmVzZXQgcG9zaXRpb25cblx0XHR0aGF0Ll9zY3JvbGxiYXJQb3MoZGlyLCB0cnVlKTtcblx0fSxcblx0XG5cdF9yZXNpemU6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cdFx0c2V0VGltZW91dChmdW5jdGlvbiAoKSB7IHRoYXQucmVmcmVzaCgpOyB9LCBpc0FuZHJvaWQgPyAyMDAgOiAwKTtcblx0fSxcblx0XG5cdF9wb3M6IGZ1bmN0aW9uICh4LCB5KSB7XG5cdFx0aWYgKHRoaXMuem9vbWVkKSByZXR1cm47XG5cblx0XHR4ID0gdGhpcy5oU2Nyb2xsID8geCA6IDA7XG5cdFx0eSA9IHRoaXMudlNjcm9sbCA/IHkgOiAwO1xuXG5cdFx0aWYgKHRoaXMub3B0aW9ucy51c2VUcmFuc2Zvcm0pIHtcblx0XHRcdHRoaXMuc2Nyb2xsZXIuc3R5bGVbdHJhbnNmb3JtXSA9ICd0cmFuc2xhdGUoJyArIHggKyAncHgsJyArIHkgKyAncHgpIHNjYWxlKCcgKyB0aGlzLnNjYWxlICsgJyknICsgdHJhbnNsYXRlWjtcblx0XHR9IGVsc2Uge1xuXHRcdFx0eCA9IG0ucm91bmQoeCk7XG5cdFx0XHR5ID0gbS5yb3VuZCh5KTtcblx0XHRcdHRoaXMuc2Nyb2xsZXIuc3R5bGUubGVmdCA9IHggKyAncHgnO1xuXHRcdFx0dGhpcy5zY3JvbGxlci5zdHlsZS50b3AgPSB5ICsgJ3B4Jztcblx0XHR9XG5cblx0XHR0aGlzLnggPSB4O1xuXHRcdHRoaXMueSA9IHk7XG5cblx0XHR0aGlzLl9zY3JvbGxiYXJQb3MoJ2gnKTtcblx0XHR0aGlzLl9zY3JvbGxiYXJQb3MoJ3YnKTtcblx0fSxcblxuXHRfc2Nyb2xsYmFyUG9zOiBmdW5jdGlvbiAoZGlyLCBoaWRkZW4pIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRwb3MgPSBkaXIgPT0gJ2gnID8gdGhhdC54IDogdGhhdC55LFxuXHRcdFx0c2l6ZTtcblxuXHRcdGlmICghdGhhdFtkaXIgKyAnU2Nyb2xsYmFyJ10pIHJldHVybjtcblxuXHRcdHBvcyA9IHRoYXRbZGlyICsgJ1Njcm9sbGJhclByb3AnXSAqIHBvcztcblxuXHRcdGlmIChwb3MgPCAwKSB7XG5cdFx0XHRpZiAoIXRoYXQub3B0aW9ucy5maXhlZFNjcm9sbGJhcikge1xuXHRcdFx0XHRzaXplID0gdGhhdFtkaXIgKyAnU2Nyb2xsYmFySW5kaWNhdG9yU2l6ZSddICsgbS5yb3VuZChwb3MgKiAzKTtcblx0XHRcdFx0aWYgKHNpemUgPCA4KSBzaXplID0gODtcblx0XHRcdFx0dGhhdFtkaXIgKyAnU2Nyb2xsYmFySW5kaWNhdG9yJ10uc3R5bGVbZGlyID09ICdoJyA/ICd3aWR0aCcgOiAnaGVpZ2h0J10gPSBzaXplICsgJ3B4Jztcblx0XHRcdH1cblx0XHRcdHBvcyA9IDA7XG5cdFx0fSBlbHNlIGlmIChwb3MgPiB0aGF0W2RpciArICdTY3JvbGxiYXJNYXhTY3JvbGwnXSkge1xuXHRcdFx0aWYgKCF0aGF0Lm9wdGlvbnMuZml4ZWRTY3JvbGxiYXIpIHtcblx0XHRcdFx0c2l6ZSA9IHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvclNpemUnXSAtIG0ucm91bmQoKHBvcyAtIHRoYXRbZGlyICsgJ1Njcm9sbGJhck1heFNjcm9sbCddKSAqIDMpO1xuXHRcdFx0XHRpZiAoc2l6ZSA8IDgpIHNpemUgPSA4O1xuXHRcdFx0XHR0aGF0W2RpciArICdTY3JvbGxiYXJJbmRpY2F0b3InXS5zdHlsZVtkaXIgPT0gJ2gnID8gJ3dpZHRoJyA6ICdoZWlnaHQnXSA9IHNpemUgKyAncHgnO1xuXHRcdFx0XHRwb3MgPSB0aGF0W2RpciArICdTY3JvbGxiYXJNYXhTY3JvbGwnXSArICh0aGF0W2RpciArICdTY3JvbGxiYXJJbmRpY2F0b3JTaXplJ10gLSBzaXplKTtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdHBvcyA9IHRoYXRbZGlyICsgJ1Njcm9sbGJhck1heFNjcm9sbCddO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoYXRbZGlyICsgJ1Njcm9sbGJhcldyYXBwZXInXS5zdHlsZVt0cmFuc2l0aW9uRGVsYXldID0gJzAnO1xuXHRcdHRoYXRbZGlyICsgJ1Njcm9sbGJhcldyYXBwZXInXS5zdHlsZS5vcGFjaXR5ID0gaGlkZGVuICYmIHRoYXQub3B0aW9ucy5oaWRlU2Nyb2xsYmFyID8gJzAnIDogJzEnO1xuXHRcdHRoYXRbZGlyICsgJ1Njcm9sbGJhckluZGljYXRvciddLnN0eWxlW3RyYW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyAoZGlyID09ICdoJyA/IHBvcyArICdweCwwKScgOiAnMCwnICsgcG9zICsgJ3B4KScpICsgdHJhbnNsYXRlWjtcblx0fSxcblx0XG5cdF9zdGFydDogZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRwb2ludCA9IGhhc1RvdWNoID8gZS50b3VjaGVzWzBdIDogZSxcblx0XHRcdG1hdHJpeCwgeCwgeSxcblx0XHRcdGMxLCBjMjtcblxuXHRcdGlmICghdGhhdC5lbmFibGVkKSByZXR1cm47XG5cblx0XHRpZiAodGhhdC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsU3RhcnQpIHRoYXQub3B0aW9ucy5vbkJlZm9yZVNjcm9sbFN0YXJ0LmNhbGwodGhhdCwgZSk7XG5cblx0XHRpZiAodGhhdC5vcHRpb25zLnVzZVRyYW5zaXRpb24gfHwgdGhhdC5vcHRpb25zLnpvb20pIHRoYXQuX3RyYW5zaXRpb25UaW1lKDApO1xuXG5cdFx0dGhhdC5tb3ZlZCA9IGZhbHNlO1xuXHRcdHRoYXQuYW5pbWF0aW5nID0gZmFsc2U7XG5cdFx0dGhhdC56b29tZWQgPSBmYWxzZTtcblx0XHR0aGF0LmRpc3RYID0gMDtcblx0XHR0aGF0LmRpc3RZID0gMDtcblx0XHR0aGF0LmFic0Rpc3RYID0gMDtcblx0XHR0aGF0LmFic0Rpc3RZID0gMDtcblx0XHR0aGF0LmRpclggPSAwO1xuXHRcdHRoYXQuZGlyWSA9IDA7XG5cblx0XHQvLyBHZXN0dXJlIHN0YXJ0XG5cdFx0aWYgKHRoYXQub3B0aW9ucy56b29tICYmIGhhc1RvdWNoICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRjMSA9IG0uYWJzKGUudG91Y2hlc1swXS5wYWdlWC1lLnRvdWNoZXNbMV0ucGFnZVgpO1xuXHRcdFx0YzIgPSBtLmFicyhlLnRvdWNoZXNbMF0ucGFnZVktZS50b3VjaGVzWzFdLnBhZ2VZKTtcblx0XHRcdHRoYXQudG91Y2hlc0Rpc3RTdGFydCA9IG0uc3FydChjMSAqIGMxICsgYzIgKiBjMik7XG5cblx0XHRcdHRoYXQub3JpZ2luWCA9IG0uYWJzKGUudG91Y2hlc1swXS5wYWdlWCArIGUudG91Y2hlc1sxXS5wYWdlWCAtIHRoYXQud3JhcHBlck9mZnNldExlZnQgKiAyKSAvIDIgLSB0aGF0Lng7XG5cdFx0XHR0aGF0Lm9yaWdpblkgPSBtLmFicyhlLnRvdWNoZXNbMF0ucGFnZVkgKyBlLnRvdWNoZXNbMV0ucGFnZVkgLSB0aGF0LndyYXBwZXJPZmZzZXRUb3AgKiAyKSAvIDIgLSB0aGF0Lnk7XG5cblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25ab29tU3RhcnQpIHRoYXQub3B0aW9ucy5vblpvb21TdGFydC5jYWxsKHRoYXQsIGUpO1xuXHRcdH1cblxuXHRcdGlmICh0aGF0Lm9wdGlvbnMubW9tZW50dW0pIHtcblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMudXNlVHJhbnNmb3JtKSB7XG5cdFx0XHRcdC8vIFZlcnkgbGFtZSBnZW5lcmFsIHB1cnBvc2UgYWx0ZXJuYXRpdmUgdG8gQ1NTTWF0cml4XG5cdFx0XHRcdG1hdHJpeCA9IGdldENvbXB1dGVkU3R5bGUodGhhdC5zY3JvbGxlciwgbnVsbClbdHJhbnNmb3JtXS5yZXBsYWNlKC9bXjAtOVxcLS4sXS9nLCAnJykuc3BsaXQoJywnKTtcblx0XHRcdFx0eCA9ICsobWF0cml4WzEyXSB8fCBtYXRyaXhbNF0pO1xuXHRcdFx0XHR5ID0gKyhtYXRyaXhbMTNdIHx8IG1hdHJpeFs1XSk7XG5cdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHR4ID0gK2dldENvbXB1dGVkU3R5bGUodGhhdC5zY3JvbGxlciwgbnVsbCkubGVmdC5yZXBsYWNlKC9bXjAtOS1dL2csICcnKTtcblx0XHRcdFx0eSA9ICtnZXRDb21wdXRlZFN0eWxlKHRoYXQuc2Nyb2xsZXIsIG51bGwpLnRvcC5yZXBsYWNlKC9bXjAtOS1dL2csICcnKTtcblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0aWYgKHggIT0gdGhhdC54IHx8IHkgIT0gdGhhdC55KSB7XG5cdFx0XHRcdGlmICh0aGF0Lm9wdGlvbnMudXNlVHJhbnNpdGlvbikgdGhhdC5fdW5iaW5kKFRSTkVORF9FVik7XG5cdFx0XHRcdGVsc2UgY2FuY2VsRnJhbWUodGhhdC5hbmlUaW1lKTtcblx0XHRcdFx0dGhhdC5zdGVwcyA9IFtdO1xuXHRcdFx0XHR0aGF0Ll9wb3MoeCwgeSk7XG5cdFx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25TY3JvbGxFbmQpIHRoYXQub3B0aW9ucy5vblNjcm9sbEVuZC5jYWxsKHRoYXQpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdHRoYXQuYWJzU3RhcnRYID0gdGhhdC54O1x0Ly8gTmVlZGVkIGJ5IHNuYXAgdGhyZXNob2xkXG5cdFx0dGhhdC5hYnNTdGFydFkgPSB0aGF0Lnk7XG5cblx0XHR0aGF0LnN0YXJ0WCA9IHRoYXQueDtcblx0XHR0aGF0LnN0YXJ0WSA9IHRoYXQueTtcblx0XHR0aGF0LnBvaW50WCA9IHBvaW50LnBhZ2VYO1xuXHRcdHRoYXQucG9pbnRZID0gcG9pbnQucGFnZVk7XG5cblx0XHR0aGF0LnN0YXJ0VGltZSA9IGUudGltZVN0YW1wIHx8IERhdGUubm93KCk7XG5cblx0XHRpZiAodGhhdC5vcHRpb25zLm9uU2Nyb2xsU3RhcnQpIHRoYXQub3B0aW9ucy5vblNjcm9sbFN0YXJ0LmNhbGwodGhhdCwgZSk7XG5cblx0XHR0aGF0Ll9iaW5kKE1PVkVfRVYsIHdpbmRvdyk7XG5cdFx0dGhhdC5fYmluZChFTkRfRVYsIHdpbmRvdyk7XG5cdFx0dGhhdC5fYmluZChDQU5DRUxfRVYsIHdpbmRvdyk7XG5cdH0sXG5cdFxuXHRfbW92ZTogZnVuY3Rpb24gKGUpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRwb2ludCA9IGhhc1RvdWNoID8gZS50b3VjaGVzWzBdIDogZSxcblx0XHRcdGRlbHRhWCA9IHBvaW50LnBhZ2VYIC0gdGhhdC5wb2ludFgsXG5cdFx0XHRkZWx0YVkgPSBwb2ludC5wYWdlWSAtIHRoYXQucG9pbnRZLFxuXHRcdFx0bmV3WCA9IHRoYXQueCArIGRlbHRhWCxcblx0XHRcdG5ld1kgPSB0aGF0LnkgKyBkZWx0YVksXG5cdFx0XHRjMSwgYzIsIHNjYWxlLFxuXHRcdFx0dGltZXN0YW1wID0gZS50aW1lU3RhbXAgfHwgRGF0ZS5ub3coKTtcblxuXHRcdGlmICh0aGF0Lm9wdGlvbnMub25CZWZvcmVTY3JvbGxNb3ZlKSB0aGF0Lm9wdGlvbnMub25CZWZvcmVTY3JvbGxNb3ZlLmNhbGwodGhhdCwgZSk7XG5cblx0XHQvLyBab29tXG5cdFx0aWYgKHRoYXQub3B0aW9ucy56b29tICYmIGhhc1RvdWNoICYmIGUudG91Y2hlcy5sZW5ndGggPiAxKSB7XG5cdFx0XHRjMSA9IG0uYWJzKGUudG91Y2hlc1swXS5wYWdlWCAtIGUudG91Y2hlc1sxXS5wYWdlWCk7XG5cdFx0XHRjMiA9IG0uYWJzKGUudG91Y2hlc1swXS5wYWdlWSAtIGUudG91Y2hlc1sxXS5wYWdlWSk7XG5cdFx0XHR0aGF0LnRvdWNoZXNEaXN0ID0gbS5zcXJ0KGMxKmMxK2MyKmMyKTtcblxuXHRcdFx0dGhhdC56b29tZWQgPSB0cnVlO1xuXG5cdFx0XHRzY2FsZSA9IDEgLyB0aGF0LnRvdWNoZXNEaXN0U3RhcnQgKiB0aGF0LnRvdWNoZXNEaXN0ICogdGhpcy5zY2FsZTtcblxuXHRcdFx0aWYgKHNjYWxlIDwgdGhhdC5vcHRpb25zLnpvb21NaW4pIHNjYWxlID0gMC41ICogdGhhdC5vcHRpb25zLnpvb21NaW4gKiBNYXRoLnBvdygyLjAsIHNjYWxlIC8gdGhhdC5vcHRpb25zLnpvb21NaW4pO1xuXHRcdFx0ZWxzZSBpZiAoc2NhbGUgPiB0aGF0Lm9wdGlvbnMuem9vbU1heCkgc2NhbGUgPSAyLjAgKiB0aGF0Lm9wdGlvbnMuem9vbU1heCAqIE1hdGgucG93KDAuNSwgdGhhdC5vcHRpb25zLnpvb21NYXggLyBzY2FsZSk7XG5cblx0XHRcdHRoYXQubGFzdFNjYWxlID0gc2NhbGUgLyB0aGlzLnNjYWxlO1xuXG5cdFx0XHRuZXdYID0gdGhpcy5vcmlnaW5YIC0gdGhpcy5vcmlnaW5YICogdGhhdC5sYXN0U2NhbGUgKyB0aGlzLng7XG5cdFx0XHRuZXdZID0gdGhpcy5vcmlnaW5ZIC0gdGhpcy5vcmlnaW5ZICogdGhhdC5sYXN0U2NhbGUgKyB0aGlzLnk7XG5cblx0XHRcdHRoaXMuc2Nyb2xsZXIuc3R5bGVbdHJhbnNmb3JtXSA9ICd0cmFuc2xhdGUoJyArIG5ld1ggKyAncHgsJyArIG5ld1kgKyAncHgpIHNjYWxlKCcgKyBzY2FsZSArICcpJyArIHRyYW5zbGF0ZVo7XG5cblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25ab29tKSB0aGF0Lm9wdGlvbnMub25ab29tLmNhbGwodGhhdCwgZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0dGhhdC5wb2ludFggPSBwb2ludC5wYWdlWDtcblx0XHR0aGF0LnBvaW50WSA9IHBvaW50LnBhZ2VZO1xuXG5cdFx0Ly8gU2xvdyBkb3duIGlmIG91dHNpZGUgb2YgdGhlIGJvdW5kYXJpZXNcblx0XHRpZiAobmV3WCA+IDAgfHwgbmV3WCA8IHRoYXQubWF4U2Nyb2xsWCkge1xuXHRcdFx0bmV3WCA9IHRoYXQub3B0aW9ucy5ib3VuY2UgPyB0aGF0LnggKyAoZGVsdGFYIC8gMikgOiBuZXdYID49IDAgfHwgdGhhdC5tYXhTY3JvbGxYID49IDAgPyAwIDogdGhhdC5tYXhTY3JvbGxYO1xuXHRcdH1cblx0XHRpZiAobmV3WSA+IHRoYXQubWluU2Nyb2xsWSB8fCBuZXdZIDwgdGhhdC5tYXhTY3JvbGxZKSB7XG5cdFx0XHRuZXdZID0gdGhhdC5vcHRpb25zLmJvdW5jZSA/IHRoYXQueSArIChkZWx0YVkgLyAyKSA6IG5ld1kgPj0gdGhhdC5taW5TY3JvbGxZIHx8IHRoYXQubWF4U2Nyb2xsWSA+PSAwID8gdGhhdC5taW5TY3JvbGxZIDogdGhhdC5tYXhTY3JvbGxZO1xuXHRcdH1cblxuXHRcdHRoYXQuZGlzdFggKz0gZGVsdGFYO1xuXHRcdHRoYXQuZGlzdFkgKz0gZGVsdGFZO1xuXHRcdHRoYXQuYWJzRGlzdFggPSBtLmFicyh0aGF0LmRpc3RYKTtcblx0XHR0aGF0LmFic0Rpc3RZID0gbS5hYnModGhhdC5kaXN0WSk7XG5cblx0XHRpZiAodGhhdC5hYnNEaXN0WCA8IDYgJiYgdGhhdC5hYnNEaXN0WSA8IDYpIHtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBMb2NrIGRpcmVjdGlvblxuXHRcdGlmICh0aGF0Lm9wdGlvbnMubG9ja0RpcmVjdGlvbikge1xuXHRcdFx0aWYgKHRoYXQuYWJzRGlzdFggPiB0aGF0LmFic0Rpc3RZICsgNSkge1xuXHRcdFx0XHRuZXdZID0gdGhhdC55O1xuXHRcdFx0XHRkZWx0YVkgPSAwO1xuXHRcdFx0fSBlbHNlIGlmICh0aGF0LmFic0Rpc3RZID4gdGhhdC5hYnNEaXN0WCArIDUpIHtcblx0XHRcdFx0bmV3WCA9IHRoYXQueDtcblx0XHRcdFx0ZGVsdGFYID0gMDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHR0aGF0Lm1vdmVkID0gdHJ1ZTtcblx0XHR0aGF0Ll9wb3MobmV3WCwgbmV3WSk7XG5cdFx0dGhhdC5kaXJYID0gZGVsdGFYID4gMCA/IC0xIDogZGVsdGFYIDwgMCA/IDEgOiAwO1xuXHRcdHRoYXQuZGlyWSA9IGRlbHRhWSA+IDAgPyAtMSA6IGRlbHRhWSA8IDAgPyAxIDogMDtcblxuXHRcdGlmICh0aW1lc3RhbXAgLSB0aGF0LnN0YXJ0VGltZSA+IDMwMCkge1xuXHRcdFx0dGhhdC5zdGFydFRpbWUgPSB0aW1lc3RhbXA7XG5cdFx0XHR0aGF0LnN0YXJ0WCA9IHRoYXQueDtcblx0XHRcdHRoYXQuc3RhcnRZID0gdGhhdC55O1xuXHRcdH1cblx0XHRcblx0XHRpZiAodGhhdC5vcHRpb25zLm9uU2Nyb2xsTW92ZSkgdGhhdC5vcHRpb25zLm9uU2Nyb2xsTW92ZS5jYWxsKHRoYXQsIGUpO1xuXHR9LFxuXHRcblx0X2VuZDogZnVuY3Rpb24gKGUpIHtcblx0XHRpZiAoaGFzVG91Y2ggJiYgZS50b3VjaGVzLmxlbmd0aCAhPT0gMCkgcmV0dXJuO1xuXG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0cG9pbnQgPSBoYXNUb3VjaCA/IGUuY2hhbmdlZFRvdWNoZXNbMF0gOiBlLFxuXHRcdFx0dGFyZ2V0LCBldixcblx0XHRcdG1vbWVudHVtWCA9IHsgZGlzdDowLCB0aW1lOjAgfSxcblx0XHRcdG1vbWVudHVtWSA9IHsgZGlzdDowLCB0aW1lOjAgfSxcblx0XHRcdGR1cmF0aW9uID0gKGUudGltZVN0YW1wIHx8IERhdGUubm93KCkpIC0gdGhhdC5zdGFydFRpbWUsXG5cdFx0XHRuZXdQb3NYID0gdGhhdC54LFxuXHRcdFx0bmV3UG9zWSA9IHRoYXQueSxcblx0XHRcdGRpc3RYLCBkaXN0WSxcblx0XHRcdG5ld0R1cmF0aW9uLFxuXHRcdFx0c25hcCxcblx0XHRcdHNjYWxlO1xuXG5cdFx0dGhhdC5fdW5iaW5kKE1PVkVfRVYsIHdpbmRvdyk7XG5cdFx0dGhhdC5fdW5iaW5kKEVORF9FViwgd2luZG93KTtcblx0XHR0aGF0Ll91bmJpbmQoQ0FOQ0VMX0VWLCB3aW5kb3cpO1xuXG5cdFx0aWYgKHRoYXQub3B0aW9ucy5vbkJlZm9yZVNjcm9sbEVuZCkgdGhhdC5vcHRpb25zLm9uQmVmb3JlU2Nyb2xsRW5kLmNhbGwodGhhdCwgZSk7XG5cblx0XHRpZiAodGhhdC56b29tZWQpIHtcblx0XHRcdHNjYWxlID0gdGhhdC5zY2FsZSAqIHRoYXQubGFzdFNjYWxlO1xuXHRcdFx0c2NhbGUgPSBNYXRoLm1heCh0aGF0Lm9wdGlvbnMuem9vbU1pbiwgc2NhbGUpO1xuXHRcdFx0c2NhbGUgPSBNYXRoLm1pbih0aGF0Lm9wdGlvbnMuem9vbU1heCwgc2NhbGUpO1xuXHRcdFx0dGhhdC5sYXN0U2NhbGUgPSBzY2FsZSAvIHRoYXQuc2NhbGU7XG5cdFx0XHR0aGF0LnNjYWxlID0gc2NhbGU7XG5cblx0XHRcdHRoYXQueCA9IHRoYXQub3JpZ2luWCAtIHRoYXQub3JpZ2luWCAqIHRoYXQubGFzdFNjYWxlICsgdGhhdC54O1xuXHRcdFx0dGhhdC55ID0gdGhhdC5vcmlnaW5ZIC0gdGhhdC5vcmlnaW5ZICogdGhhdC5sYXN0U2NhbGUgKyB0aGF0Lnk7XG5cdFx0XHRcblx0XHRcdHRoYXQuc2Nyb2xsZXIuc3R5bGVbdHJhbnNpdGlvbkR1cmF0aW9uXSA9ICcyMDBtcyc7XG5cdFx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyB0aGF0LnggKyAncHgsJyArIHRoYXQueSArICdweCkgc2NhbGUoJyArIHRoYXQuc2NhbGUgKyAnKScgKyB0cmFuc2xhdGVaO1xuXHRcdFx0XG5cdFx0XHR0aGF0Lnpvb21lZCA9IGZhbHNlO1xuXHRcdFx0dGhhdC5yZWZyZXNoKCk7XG5cblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25ab29tRW5kKSB0aGF0Lm9wdGlvbnMub25ab29tRW5kLmNhbGwodGhhdCwgZSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0aWYgKCF0aGF0Lm1vdmVkKSB7XG5cdFx0XHRpZiAoaGFzVG91Y2gpIHtcblx0XHRcdFx0aWYgKHRoYXQuZG91YmxlVGFwVGltZXIgJiYgdGhhdC5vcHRpb25zLnpvb20pIHtcblx0XHRcdFx0XHQvLyBEb3VibGUgdGFwcGVkXG5cdFx0XHRcdFx0Y2xlYXJUaW1lb3V0KHRoYXQuZG91YmxlVGFwVGltZXIpO1xuXHRcdFx0XHRcdHRoYXQuZG91YmxlVGFwVGltZXIgPSBudWxsO1xuXHRcdFx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25ab29tU3RhcnQpIHRoYXQub3B0aW9ucy5vblpvb21TdGFydC5jYWxsKHRoYXQsIGUpO1xuXHRcdFx0XHRcdHRoYXQuem9vbSh0aGF0LnBvaW50WCwgdGhhdC5wb2ludFksIHRoYXQuc2NhbGUgPT0gMSA/IHRoYXQub3B0aW9ucy5kb3VibGVUYXBab29tIDogMSk7XG5cdFx0XHRcdFx0aWYgKHRoYXQub3B0aW9ucy5vblpvb21FbmQpIHtcblx0XHRcdFx0XHRcdHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7XG5cdFx0XHRcdFx0XHRcdHRoYXQub3B0aW9ucy5vblpvb21FbmQuY2FsbCh0aGF0LCBlKTtcblx0XHRcdFx0XHRcdH0sIDIwMCk7IC8vIDIwMCBpcyBkZWZhdWx0IHpvb20gZHVyYXRpb25cblx0XHRcdFx0XHR9XG5cdFx0XHRcdH0gZWxzZSBpZiAodGhpcy5vcHRpb25zLmhhbmRsZUNsaWNrKSB7XG5cdFx0XHRcdFx0dGhhdC5kb3VibGVUYXBUaW1lciA9IHNldFRpbWVvdXQoZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdFx0dGhhdC5kb3VibGVUYXBUaW1lciA9IG51bGw7XG5cblx0XHRcdFx0XHRcdC8vIEZpbmQgdGhlIGxhc3QgdG91Y2hlZCBlbGVtZW50XG5cdFx0XHRcdFx0XHR0YXJnZXQgPSBwb2ludC50YXJnZXQ7XG5cdFx0XHRcdFx0XHR3aGlsZSAodGFyZ2V0Lm5vZGVUeXBlICE9IDEpIHRhcmdldCA9IHRhcmdldC5wYXJlbnROb2RlO1xuXG5cdFx0XHRcdFx0XHRpZiAodGFyZ2V0LnRhZ05hbWUgIT0gJ1NFTEVDVCcgJiYgdGFyZ2V0LnRhZ05hbWUgIT0gJ0lOUFVUJyAmJiB0YXJnZXQudGFnTmFtZSAhPSAnVEVYVEFSRUEnKSB7XG5cdFx0XHRcdFx0XHRcdGV2ID0gZG9jLmNyZWF0ZUV2ZW50KCdNb3VzZUV2ZW50cycpO1xuXHRcdFx0XHRcdFx0XHRldi5pbml0TW91c2VFdmVudCgnY2xpY2snLCB0cnVlLCB0cnVlLCBlLnZpZXcsIDEsXG5cdFx0XHRcdFx0XHRcdFx0cG9pbnQuc2NyZWVuWCwgcG9pbnQuc2NyZWVuWSwgcG9pbnQuY2xpZW50WCwgcG9pbnQuY2xpZW50WSxcblx0XHRcdFx0XHRcdFx0XHRlLmN0cmxLZXksIGUuYWx0S2V5LCBlLnNoaWZ0S2V5LCBlLm1ldGFLZXksXG5cdFx0XHRcdFx0XHRcdFx0MCwgbnVsbCk7XG5cdFx0XHRcdFx0XHRcdGV2Ll9mYWtlID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0dGFyZ2V0LmRpc3BhdGNoRXZlbnQoZXYpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0sIHRoYXQub3B0aW9ucy56b29tID8gMjUwIDogMCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhhdC5fcmVzZXRQb3MoNDAwKTtcblxuXHRcdFx0aWYgKHRoYXQub3B0aW9ucy5vblRvdWNoRW5kKSB0aGF0Lm9wdGlvbnMub25Ub3VjaEVuZC5jYWxsKHRoYXQsIGUpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmIChkdXJhdGlvbiA8IDMwMCAmJiB0aGF0Lm9wdGlvbnMubW9tZW50dW0pIHtcblx0XHRcdG1vbWVudHVtWCA9IG5ld1Bvc1ggPyB0aGF0Ll9tb21lbnR1bShuZXdQb3NYIC0gdGhhdC5zdGFydFgsIGR1cmF0aW9uLCAtdGhhdC54LCB0aGF0LnNjcm9sbGVyVyAtIHRoYXQud3JhcHBlclcgKyB0aGF0LngsIHRoYXQub3B0aW9ucy5ib3VuY2UgPyB0aGF0LndyYXBwZXJXIDogMCkgOiBtb21lbnR1bVg7XG5cdFx0XHRtb21lbnR1bVkgPSBuZXdQb3NZID8gdGhhdC5fbW9tZW50dW0obmV3UG9zWSAtIHRoYXQuc3RhcnRZLCBkdXJhdGlvbiwgLXRoYXQueSwgKHRoYXQubWF4U2Nyb2xsWSA8IDAgPyB0aGF0LnNjcm9sbGVySCAtIHRoYXQud3JhcHBlckggKyB0aGF0LnkgLSB0aGF0Lm1pblNjcm9sbFkgOiAwKSwgdGhhdC5vcHRpb25zLmJvdW5jZSA/IHRoYXQud3JhcHBlckggOiAwKSA6IG1vbWVudHVtWTtcblxuXHRcdFx0bmV3UG9zWCA9IHRoYXQueCArIG1vbWVudHVtWC5kaXN0O1xuXHRcdFx0bmV3UG9zWSA9IHRoYXQueSArIG1vbWVudHVtWS5kaXN0O1xuXG5cdFx0XHRpZiAoKHRoYXQueCA+IDAgJiYgbmV3UG9zWCA+IDApIHx8ICh0aGF0LnggPCB0aGF0Lm1heFNjcm9sbFggJiYgbmV3UG9zWCA8IHRoYXQubWF4U2Nyb2xsWCkpIG1vbWVudHVtWCA9IHsgZGlzdDowLCB0aW1lOjAgfTtcblx0XHRcdGlmICgodGhhdC55ID4gdGhhdC5taW5TY3JvbGxZICYmIG5ld1Bvc1kgPiB0aGF0Lm1pblNjcm9sbFkpIHx8ICh0aGF0LnkgPCB0aGF0Lm1heFNjcm9sbFkgJiYgbmV3UG9zWSA8IHRoYXQubWF4U2Nyb2xsWSkpIG1vbWVudHVtWSA9IHsgZGlzdDowLCB0aW1lOjAgfTtcblx0XHR9XG5cblx0XHRpZiAobW9tZW50dW1YLmRpc3QgfHwgbW9tZW50dW1ZLmRpc3QpIHtcblx0XHRcdG5ld0R1cmF0aW9uID0gbS5tYXgobS5tYXgobW9tZW50dW1YLnRpbWUsIG1vbWVudHVtWS50aW1lKSwgMTApO1xuXG5cdFx0XHQvLyBEbyB3ZSBuZWVkIHRvIHNuYXA/XG5cdFx0XHRpZiAodGhhdC5vcHRpb25zLnNuYXApIHtcblx0XHRcdFx0ZGlzdFggPSBuZXdQb3NYIC0gdGhhdC5hYnNTdGFydFg7XG5cdFx0XHRcdGRpc3RZID0gbmV3UG9zWSAtIHRoYXQuYWJzU3RhcnRZO1xuXHRcdFx0XHRpZiAobS5hYnMoZGlzdFgpIDwgdGhhdC5vcHRpb25zLnNuYXBUaHJlc2hvbGQgJiYgbS5hYnMoZGlzdFkpIDwgdGhhdC5vcHRpb25zLnNuYXBUaHJlc2hvbGQpIHsgdGhhdC5zY3JvbGxUbyh0aGF0LmFic1N0YXJ0WCwgdGhhdC5hYnNTdGFydFksIDIwMCk7IH1cblx0XHRcdFx0ZWxzZSB7XG5cdFx0XHRcdFx0c25hcCA9IHRoYXQuX3NuYXAobmV3UG9zWCwgbmV3UG9zWSk7XG5cdFx0XHRcdFx0bmV3UG9zWCA9IHNuYXAueDtcblx0XHRcdFx0XHRuZXdQb3NZID0gc25hcC55O1xuXHRcdFx0XHRcdG5ld0R1cmF0aW9uID0gbS5tYXgoc25hcC50aW1lLCBuZXdEdXJhdGlvbik7XG5cdFx0XHRcdH1cblx0XHRcdH1cblxuXHRcdFx0dGhhdC5zY3JvbGxUbyhtLnJvdW5kKG5ld1Bvc1gpLCBtLnJvdW5kKG5ld1Bvc1kpLCBuZXdEdXJhdGlvbik7XG5cblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25Ub3VjaEVuZCkgdGhhdC5vcHRpb25zLm9uVG91Y2hFbmQuY2FsbCh0aGF0LCBlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHQvLyBEbyB3ZSBuZWVkIHRvIHNuYXA/XG5cdFx0aWYgKHRoYXQub3B0aW9ucy5zbmFwKSB7XG5cdFx0XHRkaXN0WCA9IG5ld1Bvc1ggLSB0aGF0LmFic1N0YXJ0WDtcblx0XHRcdGRpc3RZID0gbmV3UG9zWSAtIHRoYXQuYWJzU3RhcnRZO1xuXHRcdFx0aWYgKG0uYWJzKGRpc3RYKSA8IHRoYXQub3B0aW9ucy5zbmFwVGhyZXNob2xkICYmIG0uYWJzKGRpc3RZKSA8IHRoYXQub3B0aW9ucy5zbmFwVGhyZXNob2xkKSB0aGF0LnNjcm9sbFRvKHRoYXQuYWJzU3RhcnRYLCB0aGF0LmFic1N0YXJ0WSwgMjAwKTtcblx0XHRcdGVsc2Uge1xuXHRcdFx0XHRzbmFwID0gdGhhdC5fc25hcCh0aGF0LngsIHRoYXQueSk7XG5cdFx0XHRcdGlmIChzbmFwLnggIT0gdGhhdC54IHx8IHNuYXAueSAhPSB0aGF0LnkpIHRoYXQuc2Nyb2xsVG8oc25hcC54LCBzbmFwLnksIHNuYXAudGltZSk7XG5cdFx0XHR9XG5cblx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25Ub3VjaEVuZCkgdGhhdC5vcHRpb25zLm9uVG91Y2hFbmQuY2FsbCh0aGF0LCBlKTtcblx0XHRcdHJldHVybjtcblx0XHR9XG5cblx0XHR0aGF0Ll9yZXNldFBvcygyMDApO1xuXHRcdGlmICh0aGF0Lm9wdGlvbnMub25Ub3VjaEVuZCkgdGhhdC5vcHRpb25zLm9uVG91Y2hFbmQuY2FsbCh0aGF0LCBlKTtcblx0fSxcblx0XG5cdF9yZXNldFBvczogZnVuY3Rpb24gKHRpbWUpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRyZXNldFggPSB0aGF0LnggPj0gMCA/IDAgOiB0aGF0LnggPCB0aGF0Lm1heFNjcm9sbFggPyB0aGF0Lm1heFNjcm9sbFggOiB0aGF0LngsXG5cdFx0XHRyZXNldFkgPSB0aGF0LnkgPj0gdGhhdC5taW5TY3JvbGxZIHx8IHRoYXQubWF4U2Nyb2xsWSA+IDAgPyB0aGF0Lm1pblNjcm9sbFkgOiB0aGF0LnkgPCB0aGF0Lm1heFNjcm9sbFkgPyB0aGF0Lm1heFNjcm9sbFkgOiB0aGF0Lnk7XG5cblx0XHRpZiAocmVzZXRYID09IHRoYXQueCAmJiByZXNldFkgPT0gdGhhdC55KSB7XG5cdFx0XHRpZiAodGhhdC5tb3ZlZCkge1xuXHRcdFx0XHR0aGF0Lm1vdmVkID0gZmFsc2U7XG5cdFx0XHRcdGlmICh0aGF0Lm9wdGlvbnMub25TY3JvbGxFbmQpIHRoYXQub3B0aW9ucy5vblNjcm9sbEVuZC5jYWxsKHRoYXQpO1x0XHQvLyBFeGVjdXRlIGN1c3RvbSBjb2RlIG9uIHNjcm9sbCBlbmRcblx0XHRcdH1cblxuXHRcdFx0aWYgKHRoYXQuaFNjcm9sbGJhciAmJiB0aGF0Lm9wdGlvbnMuaGlkZVNjcm9sbGJhcikge1xuXHRcdFx0XHRpZiAodmVuZG9yID09ICd3ZWJraXQnKSB0aGF0LmhTY3JvbGxiYXJXcmFwcGVyLnN0eWxlW3RyYW5zaXRpb25EZWxheV0gPSAnMzAwbXMnO1xuXHRcdFx0XHR0aGF0LmhTY3JvbGxiYXJXcmFwcGVyLnN0eWxlLm9wYWNpdHkgPSAnMCc7XG5cdFx0XHR9XG5cdFx0XHRpZiAodGhhdC52U2Nyb2xsYmFyICYmIHRoYXQub3B0aW9ucy5oaWRlU2Nyb2xsYmFyKSB7XG5cdFx0XHRcdGlmICh2ZW5kb3IgPT0gJ3dlYmtpdCcpIHRoYXQudlNjcm9sbGJhcldyYXBwZXIuc3R5bGVbdHJhbnNpdGlvbkRlbGF5XSA9ICczMDBtcyc7XG5cdFx0XHRcdHRoYXQudlNjcm9sbGJhcldyYXBwZXIuc3R5bGUub3BhY2l0eSA9ICcwJztcblx0XHRcdH1cblxuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoYXQuc2Nyb2xsVG8ocmVzZXRYLCByZXNldFksIHRpbWUgfHwgMCk7XG5cdH0sXG5cblx0X3doZWVsOiBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdHdoZWVsRGVsdGFYLCB3aGVlbERlbHRhWSxcblx0XHRcdGRlbHRhWCwgZGVsdGFZLFxuXHRcdFx0ZGVsdGFTY2FsZTtcblxuXHRcdGlmICgnd2hlZWxEZWx0YVgnIGluIGUpIHtcblx0XHRcdHdoZWVsRGVsdGFYID0gZS53aGVlbERlbHRhWCAvIDEyO1xuXHRcdFx0d2hlZWxEZWx0YVkgPSBlLndoZWVsRGVsdGFZIC8gMTI7XG5cdFx0fSBlbHNlIGlmKCd3aGVlbERlbHRhJyBpbiBlKSB7XG5cdFx0XHR3aGVlbERlbHRhWCA9IHdoZWVsRGVsdGFZID0gZS53aGVlbERlbHRhIC8gMTI7XG5cdFx0fSBlbHNlIGlmICgnZGV0YWlsJyBpbiBlKSB7XG5cdFx0XHR3aGVlbERlbHRhWCA9IHdoZWVsRGVsdGFZID0gLWUuZGV0YWlsICogMztcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblx0XHRcblx0XHRpZiAodGhhdC5vcHRpb25zLndoZWVsQWN0aW9uID09ICd6b29tJykge1xuXHRcdFx0ZGVsdGFTY2FsZSA9IHRoYXQuc2NhbGUgKiBNYXRoLnBvdygyLCAxLzMgKiAod2hlZWxEZWx0YVkgPyB3aGVlbERlbHRhWSAvIE1hdGguYWJzKHdoZWVsRGVsdGFZKSA6IDApKTtcblx0XHRcdGlmIChkZWx0YVNjYWxlIDwgdGhhdC5vcHRpb25zLnpvb21NaW4pIGRlbHRhU2NhbGUgPSB0aGF0Lm9wdGlvbnMuem9vbU1pbjtcblx0XHRcdGlmIChkZWx0YVNjYWxlID4gdGhhdC5vcHRpb25zLnpvb21NYXgpIGRlbHRhU2NhbGUgPSB0aGF0Lm9wdGlvbnMuem9vbU1heDtcblx0XHRcdFxuXHRcdFx0aWYgKGRlbHRhU2NhbGUgIT0gdGhhdC5zY2FsZSkge1xuXHRcdFx0XHRpZiAoIXRoYXQud2hlZWxab29tQ291bnQgJiYgdGhhdC5vcHRpb25zLm9uWm9vbVN0YXJ0KSB0aGF0Lm9wdGlvbnMub25ab29tU3RhcnQuY2FsbCh0aGF0LCBlKTtcblx0XHRcdFx0dGhhdC53aGVlbFpvb21Db3VudCsrO1xuXHRcdFx0XHRcblx0XHRcdFx0dGhhdC56b29tKGUucGFnZVgsIGUucGFnZVksIGRlbHRhU2NhbGUsIDQwMCk7XG5cdFx0XHRcdFxuXHRcdFx0XHRzZXRUaW1lb3V0KGZ1bmN0aW9uKCkge1xuXHRcdFx0XHRcdHRoYXQud2hlZWxab29tQ291bnQtLTtcblx0XHRcdFx0XHRpZiAoIXRoYXQud2hlZWxab29tQ291bnQgJiYgdGhhdC5vcHRpb25zLm9uWm9vbUVuZCkgdGhhdC5vcHRpb25zLm9uWm9vbUVuZC5jYWxsKHRoYXQsIGUpO1xuXHRcdFx0XHR9LCA0MDApO1xuXHRcdFx0fVxuXHRcdFx0XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdGRlbHRhWCA9IHRoYXQueCArIHdoZWVsRGVsdGFYO1xuXHRcdGRlbHRhWSA9IHRoYXQueSArIHdoZWVsRGVsdGFZO1xuXG5cdFx0aWYgKGRlbHRhWCA+IDApIGRlbHRhWCA9IDA7XG5cdFx0ZWxzZSBpZiAoZGVsdGFYIDwgdGhhdC5tYXhTY3JvbGxYKSBkZWx0YVggPSB0aGF0Lm1heFNjcm9sbFg7XG5cblx0XHRpZiAoZGVsdGFZID4gdGhhdC5taW5TY3JvbGxZKSBkZWx0YVkgPSB0aGF0Lm1pblNjcm9sbFk7XG5cdFx0ZWxzZSBpZiAoZGVsdGFZIDwgdGhhdC5tYXhTY3JvbGxZKSBkZWx0YVkgPSB0aGF0Lm1heFNjcm9sbFk7XG4gICAgXG5cdFx0aWYgKHRoYXQubWF4U2Nyb2xsWSA8IDApIHtcblx0XHRcdHRoYXQuc2Nyb2xsVG8oZGVsdGFYLCBkZWx0YVksIDApO1xuXHRcdH1cblx0fSxcblx0XG5cdF90cmFuc2l0aW9uRW5kOiBmdW5jdGlvbiAoZSkge1xuXHRcdHZhciB0aGF0ID0gdGhpcztcblxuXHRcdGlmIChlLnRhcmdldCAhPSB0aGF0LnNjcm9sbGVyKSByZXR1cm47XG5cblx0XHR0aGF0Ll91bmJpbmQoVFJORU5EX0VWKTtcblx0XHRcblx0XHR0aGF0Ll9zdGFydEFuaSgpO1xuXHR9LFxuXG5cblx0LyoqXG5cdCpcblx0KiBVdGlsaXRpZXNcblx0KlxuXHQqL1xuXHRfc3RhcnRBbmk6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRzdGFydFggPSB0aGF0LngsIHN0YXJ0WSA9IHRoYXQueSxcblx0XHRcdHN0YXJ0VGltZSA9IERhdGUubm93KCksXG5cdFx0XHRzdGVwLCBlYXNlT3V0LFxuXHRcdFx0YW5pbWF0ZTtcblxuXHRcdGlmICh0aGF0LmFuaW1hdGluZykgcmV0dXJuO1xuXHRcdFxuXHRcdGlmICghdGhhdC5zdGVwcy5sZW5ndGgpIHtcblx0XHRcdHRoYXQuX3Jlc2V0UG9zKDQwMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXHRcdFxuXHRcdHN0ZXAgPSB0aGF0LnN0ZXBzLnNoaWZ0KCk7XG5cdFx0XG5cdFx0aWYgKHN0ZXAueCA9PSBzdGFydFggJiYgc3RlcC55ID09IHN0YXJ0WSkgc3RlcC50aW1lID0gMDtcblxuXHRcdHRoYXQuYW5pbWF0aW5nID0gdHJ1ZTtcblx0XHR0aGF0Lm1vdmVkID0gdHJ1ZTtcblx0XHRcblx0XHRpZiAodGhhdC5vcHRpb25zLnVzZVRyYW5zaXRpb24pIHtcblx0XHRcdHRoYXQuX3RyYW5zaXRpb25UaW1lKHN0ZXAudGltZSk7XG5cdFx0XHR0aGF0Ll9wb3Moc3RlcC54LCBzdGVwLnkpO1xuXHRcdFx0dGhhdC5hbmltYXRpbmcgPSBmYWxzZTtcblx0XHRcdGlmIChzdGVwLnRpbWUpIHRoYXQuX2JpbmQoVFJORU5EX0VWKTtcblx0XHRcdGVsc2UgdGhhdC5fcmVzZXRQb3MoMCk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0YW5pbWF0ZSA9IGZ1bmN0aW9uICgpIHtcblx0XHRcdHZhciBub3cgPSBEYXRlLm5vdygpLFxuXHRcdFx0XHRuZXdYLCBuZXdZO1xuXG5cdFx0XHRpZiAobm93ID49IHN0YXJ0VGltZSArIHN0ZXAudGltZSkge1xuXHRcdFx0XHR0aGF0Ll9wb3Moc3RlcC54LCBzdGVwLnkpO1xuXHRcdFx0XHR0aGF0LmFuaW1hdGluZyA9IGZhbHNlO1xuXHRcdFx0XHRpZiAodGhhdC5vcHRpb25zLm9uQW5pbWF0aW9uRW5kKSB0aGF0Lm9wdGlvbnMub25BbmltYXRpb25FbmQuY2FsbCh0aGF0KTtcdFx0XHQvLyBFeGVjdXRlIGN1c3RvbSBjb2RlIG9uIGFuaW1hdGlvbiBlbmRcblx0XHRcdFx0dGhhdC5fc3RhcnRBbmkoKTtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHRub3cgPSAobm93IC0gc3RhcnRUaW1lKSAvIHN0ZXAudGltZSAtIDE7XG5cdFx0XHRlYXNlT3V0ID0gbS5zcXJ0KDEgLSBub3cgKiBub3cpO1xuXHRcdFx0bmV3WCA9IChzdGVwLnggLSBzdGFydFgpICogZWFzZU91dCArIHN0YXJ0WDtcblx0XHRcdG5ld1kgPSAoc3RlcC55IC0gc3RhcnRZKSAqIGVhc2VPdXQgKyBzdGFydFk7XG5cdFx0XHR0aGF0Ll9wb3MobmV3WCwgbmV3WSk7XG5cdFx0XHRpZiAodGhhdC5hbmltYXRpbmcpIHRoYXQuYW5pVGltZSA9IG5leHRGcmFtZShhbmltYXRlKTtcblx0XHR9O1xuXG5cdFx0YW5pbWF0ZSgpO1xuXHR9LFxuXG5cdF90cmFuc2l0aW9uVGltZTogZnVuY3Rpb24gKHRpbWUpIHtcblx0XHR0aW1lICs9ICdtcyc7XG5cdFx0dGhpcy5zY3JvbGxlci5zdHlsZVt0cmFuc2l0aW9uRHVyYXRpb25dID0gdGltZTtcblx0XHRpZiAodGhpcy5oU2Nyb2xsYmFyKSB0aGlzLmhTY3JvbGxiYXJJbmRpY2F0b3Iuc3R5bGVbdHJhbnNpdGlvbkR1cmF0aW9uXSA9IHRpbWU7XG5cdFx0aWYgKHRoaXMudlNjcm9sbGJhcikgdGhpcy52U2Nyb2xsYmFySW5kaWNhdG9yLnN0eWxlW3RyYW5zaXRpb25EdXJhdGlvbl0gPSB0aW1lO1xuXHR9LFxuXG5cdF9tb21lbnR1bTogZnVuY3Rpb24gKGRpc3QsIHRpbWUsIG1heERpc3RVcHBlciwgbWF4RGlzdExvd2VyLCBzaXplKSB7XG5cdFx0dmFyIGRlY2VsZXJhdGlvbiA9IDAuMDAwNixcblx0XHRcdHNwZWVkID0gbS5hYnMoZGlzdCkgLyB0aW1lLFxuXHRcdFx0bmV3RGlzdCA9IChzcGVlZCAqIHNwZWVkKSAvICgyICogZGVjZWxlcmF0aW9uKSxcblx0XHRcdG5ld1RpbWUgPSAwLCBvdXRzaWRlRGlzdCA9IDA7XG5cblx0XHQvLyBQcm9wb3J0aW5hbGx5IHJlZHVjZSBzcGVlZCBpZiB3ZSBhcmUgb3V0c2lkZSBvZiB0aGUgYm91bmRhcmllc1xuXHRcdGlmIChkaXN0ID4gMCAmJiBuZXdEaXN0ID4gbWF4RGlzdFVwcGVyKSB7XG5cdFx0XHRvdXRzaWRlRGlzdCA9IHNpemUgLyAoNiAvIChuZXdEaXN0IC8gc3BlZWQgKiBkZWNlbGVyYXRpb24pKTtcblx0XHRcdG1heERpc3RVcHBlciA9IG1heERpc3RVcHBlciArIG91dHNpZGVEaXN0O1xuXHRcdFx0c3BlZWQgPSBzcGVlZCAqIG1heERpc3RVcHBlciAvIG5ld0Rpc3Q7XG5cdFx0XHRuZXdEaXN0ID0gbWF4RGlzdFVwcGVyO1xuXHRcdH0gZWxzZSBpZiAoZGlzdCA8IDAgJiYgbmV3RGlzdCA+IG1heERpc3RMb3dlcikge1xuXHRcdFx0b3V0c2lkZURpc3QgPSBzaXplIC8gKDYgLyAobmV3RGlzdCAvIHNwZWVkICogZGVjZWxlcmF0aW9uKSk7XG5cdFx0XHRtYXhEaXN0TG93ZXIgPSBtYXhEaXN0TG93ZXIgKyBvdXRzaWRlRGlzdDtcblx0XHRcdHNwZWVkID0gc3BlZWQgKiBtYXhEaXN0TG93ZXIgLyBuZXdEaXN0O1xuXHRcdFx0bmV3RGlzdCA9IG1heERpc3RMb3dlcjtcblx0XHR9XG5cblx0XHRuZXdEaXN0ID0gbmV3RGlzdCAqIChkaXN0IDwgMCA/IC0xIDogMSk7XG5cdFx0bmV3VGltZSA9IHNwZWVkIC8gZGVjZWxlcmF0aW9uO1xuXG5cdFx0cmV0dXJuIHsgZGlzdDogbmV3RGlzdCwgdGltZTogbS5yb3VuZChuZXdUaW1lKSB9O1xuXHR9LFxuXG5cdF9vZmZzZXQ6IGZ1bmN0aW9uIChlbCkge1xuXHRcdHZhciBsZWZ0ID0gLWVsLm9mZnNldExlZnQsXG5cdFx0XHR0b3AgPSAtZWwub2Zmc2V0VG9wO1xuXHRcdFx0XG5cdFx0d2hpbGUgKGVsID0gZWwub2Zmc2V0UGFyZW50KSB7XG5cdFx0XHRsZWZ0IC09IGVsLm9mZnNldExlZnQ7XG5cdFx0XHR0b3AgLT0gZWwub2Zmc2V0VG9wO1xuXHRcdH1cblx0XHRcblx0XHRpZiAoZWwgIT0gdGhpcy53cmFwcGVyKSB7XG5cdFx0XHRsZWZ0ICo9IHRoaXMuc2NhbGU7XG5cdFx0XHR0b3AgKj0gdGhpcy5zY2FsZTtcblx0XHR9XG5cblx0XHRyZXR1cm4geyBsZWZ0OiBsZWZ0LCB0b3A6IHRvcCB9O1xuXHR9LFxuXG5cdF9zbmFwOiBmdW5jdGlvbiAoeCwgeSkge1xuXHRcdHZhciB0aGF0ID0gdGhpcyxcblx0XHRcdGksIGwsXG5cdFx0XHRwYWdlLCB0aW1lLFxuXHRcdFx0c2l6ZVgsIHNpemVZO1xuXG5cdFx0Ly8gQ2hlY2sgcGFnZSBYXG5cdFx0cGFnZSA9IHRoYXQucGFnZXNYLmxlbmd0aCAtIDE7XG5cdFx0Zm9yIChpPTAsIGw9dGhhdC5wYWdlc1gubGVuZ3RoOyBpPGw7IGkrKykge1xuXHRcdFx0aWYgKHggPj0gdGhhdC5wYWdlc1hbaV0pIHtcblx0XHRcdFx0cGFnZSA9IGk7XG5cdFx0XHRcdGJyZWFrO1xuXHRcdFx0fVxuXHRcdH1cblx0XHRpZiAocGFnZSA9PSB0aGF0LmN1cnJQYWdlWCAmJiBwYWdlID4gMCAmJiB0aGF0LmRpclggPCAwKSBwYWdlLS07XG5cdFx0eCA9IHRoYXQucGFnZXNYW3BhZ2VdO1xuXHRcdHNpemVYID0gbS5hYnMoeCAtIHRoYXQucGFnZXNYW3RoYXQuY3VyclBhZ2VYXSk7XG5cdFx0c2l6ZVggPSBzaXplWCA/IG0uYWJzKHRoYXQueCAtIHgpIC8gc2l6ZVggKiA1MDAgOiAwO1xuXHRcdHRoYXQuY3VyclBhZ2VYID0gcGFnZTtcblxuXHRcdC8vIENoZWNrIHBhZ2UgWVxuXHRcdHBhZ2UgPSB0aGF0LnBhZ2VzWS5sZW5ndGgtMTtcblx0XHRmb3IgKGk9MDsgaTxwYWdlOyBpKyspIHtcblx0XHRcdGlmICh5ID49IHRoYXQucGFnZXNZW2ldKSB7XG5cdFx0XHRcdHBhZ2UgPSBpO1xuXHRcdFx0XHRicmVhaztcblx0XHRcdH1cblx0XHR9XG5cdFx0aWYgKHBhZ2UgPT0gdGhhdC5jdXJyUGFnZVkgJiYgcGFnZSA+IDAgJiYgdGhhdC5kaXJZIDwgMCkgcGFnZS0tO1xuXHRcdHkgPSB0aGF0LnBhZ2VzWVtwYWdlXTtcblx0XHRzaXplWSA9IG0uYWJzKHkgLSB0aGF0LnBhZ2VzWVt0aGF0LmN1cnJQYWdlWV0pO1xuXHRcdHNpemVZID0gc2l6ZVkgPyBtLmFicyh0aGF0LnkgLSB5KSAvIHNpemVZICogNTAwIDogMDtcblx0XHR0aGF0LmN1cnJQYWdlWSA9IHBhZ2U7XG5cblx0XHQvLyBTbmFwIHdpdGggY29uc3RhbnQgc3BlZWQgKHByb3BvcnRpb25hbCBkdXJhdGlvbilcblx0XHR0aW1lID0gbS5yb3VuZChtLm1heChzaXplWCwgc2l6ZVkpKSB8fCAyMDA7XG5cblx0XHRyZXR1cm4geyB4OiB4LCB5OiB5LCB0aW1lOiB0aW1lIH07XG5cdH0sXG5cblx0X2JpbmQ6IGZ1bmN0aW9uICh0eXBlLCBlbCwgYnViYmxlKSB7XG5cdFx0KGVsIHx8IHRoaXMuc2Nyb2xsZXIpLmFkZEV2ZW50TGlzdGVuZXIodHlwZSwgdGhpcywgISFidWJibGUpO1xuXHR9LFxuXG5cdF91bmJpbmQ6IGZ1bmN0aW9uICh0eXBlLCBlbCwgYnViYmxlKSB7XG5cdFx0KGVsIHx8IHRoaXMuc2Nyb2xsZXIpLnJlbW92ZUV2ZW50TGlzdGVuZXIodHlwZSwgdGhpcywgISFidWJibGUpO1xuXHR9LFxuXG5cblx0LyoqXG5cdCpcblx0KiBQdWJsaWMgbWV0aG9kc1xuXHQqXG5cdCovXG5cdGRlc3Ryb3k6IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXM7XG5cblx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zZm9ybV0gPSAnJztcblxuXHRcdC8vIFJlbW92ZSB0aGUgc2Nyb2xsYmFyc1xuXHRcdHRoYXQuaFNjcm9sbGJhciA9IGZhbHNlO1xuXHRcdHRoYXQudlNjcm9sbGJhciA9IGZhbHNlO1xuXHRcdHRoYXQuX3Njcm9sbGJhcignaCcpO1xuXHRcdHRoYXQuX3Njcm9sbGJhcigndicpO1xuXG5cdFx0Ly8gUmVtb3ZlIHRoZSBldmVudCBsaXN0ZW5lcnNcblx0XHR0aGF0Ll91bmJpbmQoUkVTSVpFX0VWLCB3aW5kb3cpO1xuXHRcdHRoYXQuX3VuYmluZChTVEFSVF9FVik7XG5cdFx0dGhhdC5fdW5iaW5kKE1PVkVfRVYsIHdpbmRvdyk7XG5cdFx0dGhhdC5fdW5iaW5kKEVORF9FViwgd2luZG93KTtcblx0XHR0aGF0Ll91bmJpbmQoQ0FOQ0VMX0VWLCB3aW5kb3cpO1xuXHRcdFxuXHRcdGlmICghdGhhdC5vcHRpb25zLmhhc1RvdWNoKSB7XG5cdFx0XHR0aGF0Ll91bmJpbmQoJ0RPTU1vdXNlU2Nyb2xsJyk7XG5cdFx0XHR0aGF0Ll91bmJpbmQoJ21vdXNld2hlZWwnKTtcblx0XHR9XG5cdFx0XG5cdFx0aWYgKHRoYXQub3B0aW9ucy51c2VUcmFuc2l0aW9uKSB0aGF0Ll91bmJpbmQoVFJORU5EX0VWKTtcblx0XHRcblx0XHRpZiAodGhhdC5vcHRpb25zLmNoZWNrRE9NQ2hhbmdlcykgY2xlYXJJbnRlcnZhbCh0aGF0LmNoZWNrRE9NVGltZSk7XG5cdFx0XG5cdFx0aWYgKHRoYXQub3B0aW9ucy5vbkRlc3Ryb3kpIHRoYXQub3B0aW9ucy5vbkRlc3Ryb3kuY2FsbCh0aGF0KTtcblx0fSxcblxuXHRyZWZyZXNoOiBmdW5jdGlvbiAoKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0b2Zmc2V0LFxuXHRcdFx0aSwgbCxcblx0XHRcdGVscyxcblx0XHRcdHBvcyA9IDAsXG5cdFx0XHRwYWdlID0gMDtcblxuXHRcdGlmICh0aGF0LnNjYWxlIDwgdGhhdC5vcHRpb25zLnpvb21NaW4pIHRoYXQuc2NhbGUgPSB0aGF0Lm9wdGlvbnMuem9vbU1pbjtcblx0XHR0aGF0LndyYXBwZXJXID0gdGhhdC53cmFwcGVyLmNsaWVudFdpZHRoIHx8IDE7XG5cdFx0dGhhdC53cmFwcGVySCA9IHRoYXQud3JhcHBlci5jbGllbnRIZWlnaHQgfHwgMTtcblxuXHRcdHRoYXQubWluU2Nyb2xsWSA9IC10aGF0Lm9wdGlvbnMudG9wT2Zmc2V0IHx8IDA7XG5cdFx0dGhhdC5zY3JvbGxlclcgPSBtLnJvdW5kKHRoYXQuc2Nyb2xsZXIub2Zmc2V0V2lkdGggKiB0aGF0LnNjYWxlKTtcblx0XHR0aGF0LnNjcm9sbGVySCA9IG0ucm91bmQoKHRoYXQuc2Nyb2xsZXIub2Zmc2V0SGVpZ2h0ICsgdGhhdC5taW5TY3JvbGxZKSAqIHRoYXQuc2NhbGUpO1xuXHRcdHRoYXQubWF4U2Nyb2xsWCA9IHRoYXQud3JhcHBlclcgLSB0aGF0LnNjcm9sbGVyVztcblx0XHR0aGF0Lm1heFNjcm9sbFkgPSB0aGF0LndyYXBwZXJIIC0gdGhhdC5zY3JvbGxlckggKyB0aGF0Lm1pblNjcm9sbFk7XG5cdFx0dGhhdC5kaXJYID0gMDtcblx0XHR0aGF0LmRpclkgPSAwO1xuXG5cdFx0aWYgKHRoYXQub3B0aW9ucy5vblJlZnJlc2gpIHRoYXQub3B0aW9ucy5vblJlZnJlc2guY2FsbCh0aGF0KTtcblxuXHRcdHRoYXQuaFNjcm9sbCA9IHRoYXQub3B0aW9ucy5oU2Nyb2xsICYmIHRoYXQubWF4U2Nyb2xsWCA8IDA7XG5cdFx0dGhhdC52U2Nyb2xsID0gdGhhdC5vcHRpb25zLnZTY3JvbGwgJiYgKCF0aGF0Lm9wdGlvbnMuYm91bmNlTG9jayAmJiAhdGhhdC5oU2Nyb2xsIHx8IHRoYXQuc2Nyb2xsZXJIID4gdGhhdC53cmFwcGVySCk7XG5cblx0XHR0aGF0LmhTY3JvbGxiYXIgPSB0aGF0LmhTY3JvbGwgJiYgdGhhdC5vcHRpb25zLmhTY3JvbGxiYXI7XG5cdFx0dGhhdC52U2Nyb2xsYmFyID0gdGhhdC52U2Nyb2xsICYmIHRoYXQub3B0aW9ucy52U2Nyb2xsYmFyICYmIHRoYXQuc2Nyb2xsZXJIID4gdGhhdC53cmFwcGVySDtcblxuXHRcdG9mZnNldCA9IHRoYXQuX29mZnNldCh0aGF0LndyYXBwZXIpO1xuXHRcdHRoYXQud3JhcHBlck9mZnNldExlZnQgPSAtb2Zmc2V0LmxlZnQ7XG5cdFx0dGhhdC53cmFwcGVyT2Zmc2V0VG9wID0gLW9mZnNldC50b3A7XG5cblx0XHQvLyBQcmVwYXJlIHNuYXBcblx0XHRpZiAodHlwZW9mIHRoYXQub3B0aW9ucy5zbmFwID09ICdzdHJpbmcnKSB7XG5cdFx0XHR0aGF0LnBhZ2VzWCA9IFtdO1xuXHRcdFx0dGhhdC5wYWdlc1kgPSBbXTtcblx0XHRcdGVscyA9IHRoYXQuc2Nyb2xsZXIucXVlcnlTZWxlY3RvckFsbCh0aGF0Lm9wdGlvbnMuc25hcCk7XG5cdFx0XHRmb3IgKGk9MCwgbD1lbHMubGVuZ3RoOyBpPGw7IGkrKykge1xuXHRcdFx0XHRwb3MgPSB0aGF0Ll9vZmZzZXQoZWxzW2ldKTtcblx0XHRcdFx0cG9zLmxlZnQgKz0gdGhhdC53cmFwcGVyT2Zmc2V0TGVmdDtcblx0XHRcdFx0cG9zLnRvcCArPSB0aGF0LndyYXBwZXJPZmZzZXRUb3A7XG5cdFx0XHRcdHRoYXQucGFnZXNYW2ldID0gcG9zLmxlZnQgPCB0aGF0Lm1heFNjcm9sbFggPyB0aGF0Lm1heFNjcm9sbFggOiBwb3MubGVmdCAqIHRoYXQuc2NhbGU7XG5cdFx0XHRcdHRoYXQucGFnZXNZW2ldID0gcG9zLnRvcCA8IHRoYXQubWF4U2Nyb2xsWSA/IHRoYXQubWF4U2Nyb2xsWSA6IHBvcy50b3AgKiB0aGF0LnNjYWxlO1xuXHRcdFx0fVxuXHRcdH0gZWxzZSBpZiAodGhhdC5vcHRpb25zLnNuYXApIHtcblx0XHRcdHRoYXQucGFnZXNYID0gW107XG5cdFx0XHR3aGlsZSAocG9zID49IHRoYXQubWF4U2Nyb2xsWCkge1xuXHRcdFx0XHR0aGF0LnBhZ2VzWFtwYWdlXSA9IHBvcztcblx0XHRcdFx0cG9zID0gcG9zIC0gdGhhdC53cmFwcGVyVztcblx0XHRcdFx0cGFnZSsrO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHRoYXQubWF4U2Nyb2xsWCV0aGF0LndyYXBwZXJXKSB0aGF0LnBhZ2VzWFt0aGF0LnBhZ2VzWC5sZW5ndGhdID0gdGhhdC5tYXhTY3JvbGxYIC0gdGhhdC5wYWdlc1hbdGhhdC5wYWdlc1gubGVuZ3RoLTFdICsgdGhhdC5wYWdlc1hbdGhhdC5wYWdlc1gubGVuZ3RoLTFdO1xuXG5cdFx0XHRwb3MgPSAwO1xuXHRcdFx0cGFnZSA9IDA7XG5cdFx0XHR0aGF0LnBhZ2VzWSA9IFtdO1xuXHRcdFx0d2hpbGUgKHBvcyA+PSB0aGF0Lm1heFNjcm9sbFkpIHtcblx0XHRcdFx0dGhhdC5wYWdlc1lbcGFnZV0gPSBwb3M7XG5cdFx0XHRcdHBvcyA9IHBvcyAtIHRoYXQud3JhcHBlckg7XG5cdFx0XHRcdHBhZ2UrKztcblx0XHRcdH1cblx0XHRcdGlmICh0aGF0Lm1heFNjcm9sbFkldGhhdC53cmFwcGVySCkgdGhhdC5wYWdlc1lbdGhhdC5wYWdlc1kubGVuZ3RoXSA9IHRoYXQubWF4U2Nyb2xsWSAtIHRoYXQucGFnZXNZW3RoYXQucGFnZXNZLmxlbmd0aC0xXSArIHRoYXQucGFnZXNZW3RoYXQucGFnZXNZLmxlbmd0aC0xXTtcblx0XHR9XG5cblx0XHQvLyBQcmVwYXJlIHRoZSBzY3JvbGxiYXJzXG5cdFx0dGhhdC5fc2Nyb2xsYmFyKCdoJyk7XG5cdFx0dGhhdC5fc2Nyb2xsYmFyKCd2Jyk7XG5cblx0XHRpZiAoIXRoYXQuem9vbWVkKSB7XG5cdFx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zaXRpb25EdXJhdGlvbl0gPSAnMCc7XG5cdFx0XHR0aGF0Ll9yZXNldFBvcyg0MDApO1xuXHRcdH1cblx0fSxcblxuXHRzY3JvbGxUbzogZnVuY3Rpb24gKHgsIHksIHRpbWUsIHJlbGF0aXZlKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLFxuXHRcdFx0c3RlcCA9IHgsXG5cdFx0XHRpLCBsO1xuXG5cdFx0dGhhdC5zdG9wKCk7XG5cblx0XHRpZiAoIXN0ZXAubGVuZ3RoKSBzdGVwID0gW3sgeDogeCwgeTogeSwgdGltZTogdGltZSwgcmVsYXRpdmU6IHJlbGF0aXZlIH1dO1xuXHRcdFxuXHRcdGZvciAoaT0wLCBsPXN0ZXAubGVuZ3RoOyBpPGw7IGkrKykge1xuXHRcdFx0aWYgKHN0ZXBbaV0ucmVsYXRpdmUpIHsgc3RlcFtpXS54ID0gdGhhdC54IC0gc3RlcFtpXS54OyBzdGVwW2ldLnkgPSB0aGF0LnkgLSBzdGVwW2ldLnk7IH1cblx0XHRcdHRoYXQuc3RlcHMucHVzaCh7IHg6IHN0ZXBbaV0ueCwgeTogc3RlcFtpXS55LCB0aW1lOiBzdGVwW2ldLnRpbWUgfHwgMCB9KTtcblx0XHR9XG5cblx0XHR0aGF0Ll9zdGFydEFuaSgpO1xuXHR9LFxuXG5cdHNjcm9sbFRvRWxlbWVudDogZnVuY3Rpb24gKGVsLCB0aW1lKSB7XG5cdFx0dmFyIHRoYXQgPSB0aGlzLCBwb3M7XG5cdFx0ZWwgPSBlbC5ub2RlVHlwZSA/IGVsIDogdGhhdC5zY3JvbGxlci5xdWVyeVNlbGVjdG9yKGVsKTtcblx0XHRpZiAoIWVsKSByZXR1cm47XG5cblx0XHRwb3MgPSB0aGF0Ll9vZmZzZXQoZWwpO1xuXHRcdHBvcy5sZWZ0ICs9IHRoYXQud3JhcHBlck9mZnNldExlZnQ7XG5cdFx0cG9zLnRvcCArPSB0aGF0LndyYXBwZXJPZmZzZXRUb3A7XG5cblx0XHRwb3MubGVmdCA9IHBvcy5sZWZ0ID4gMCA/IDAgOiBwb3MubGVmdCA8IHRoYXQubWF4U2Nyb2xsWCA/IHRoYXQubWF4U2Nyb2xsWCA6IHBvcy5sZWZ0O1xuXHRcdHBvcy50b3AgPSBwb3MudG9wID4gdGhhdC5taW5TY3JvbGxZID8gdGhhdC5taW5TY3JvbGxZIDogcG9zLnRvcCA8IHRoYXQubWF4U2Nyb2xsWSA/IHRoYXQubWF4U2Nyb2xsWSA6IHBvcy50b3A7XG5cdFx0dGltZSA9IHRpbWUgPT09IHVuZGVmaW5lZCA/IG0ubWF4KG0uYWJzKHBvcy5sZWZ0KSoyLCBtLmFicyhwb3MudG9wKSoyKSA6IHRpbWU7XG5cblx0XHR0aGF0LnNjcm9sbFRvKHBvcy5sZWZ0LCBwb3MudG9wLCB0aW1lKTtcblx0fSxcblxuXHRzY3JvbGxUb1BhZ2U6IGZ1bmN0aW9uIChwYWdlWCwgcGFnZVksIHRpbWUpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsIHgsIHk7XG5cdFx0XG5cdFx0dGltZSA9IHRpbWUgPT09IHVuZGVmaW5lZCA/IDQwMCA6IHRpbWU7XG5cblx0XHRpZiAodGhhdC5vcHRpb25zLm9uU2Nyb2xsU3RhcnQpIHRoYXQub3B0aW9ucy5vblNjcm9sbFN0YXJ0LmNhbGwodGhhdCk7XG5cblx0XHRpZiAodGhhdC5vcHRpb25zLnNuYXApIHtcblx0XHRcdHBhZ2VYID0gcGFnZVggPT0gJ25leHQnID8gdGhhdC5jdXJyUGFnZVgrMSA6IHBhZ2VYID09ICdwcmV2JyA/IHRoYXQuY3VyclBhZ2VYLTEgOiBwYWdlWDtcblx0XHRcdHBhZ2VZID0gcGFnZVkgPT0gJ25leHQnID8gdGhhdC5jdXJyUGFnZVkrMSA6IHBhZ2VZID09ICdwcmV2JyA/IHRoYXQuY3VyclBhZ2VZLTEgOiBwYWdlWTtcblxuXHRcdFx0cGFnZVggPSBwYWdlWCA8IDAgPyAwIDogcGFnZVggPiB0aGF0LnBhZ2VzWC5sZW5ndGgtMSA/IHRoYXQucGFnZXNYLmxlbmd0aC0xIDogcGFnZVg7XG5cdFx0XHRwYWdlWSA9IHBhZ2VZIDwgMCA/IDAgOiBwYWdlWSA+IHRoYXQucGFnZXNZLmxlbmd0aC0xID8gdGhhdC5wYWdlc1kubGVuZ3RoLTEgOiBwYWdlWTtcblxuXHRcdFx0dGhhdC5jdXJyUGFnZVggPSBwYWdlWDtcblx0XHRcdHRoYXQuY3VyclBhZ2VZID0gcGFnZVk7XG5cdFx0XHR4ID0gdGhhdC5wYWdlc1hbcGFnZVhdO1xuXHRcdFx0eSA9IHRoYXQucGFnZXNZW3BhZ2VZXTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0eCA9IC10aGF0LndyYXBwZXJXICogcGFnZVg7XG5cdFx0XHR5ID0gLXRoYXQud3JhcHBlckggKiBwYWdlWTtcblx0XHRcdGlmICh4IDwgdGhhdC5tYXhTY3JvbGxYKSB4ID0gdGhhdC5tYXhTY3JvbGxYO1xuXHRcdFx0aWYgKHkgPCB0aGF0Lm1heFNjcm9sbFkpIHkgPSB0aGF0Lm1heFNjcm9sbFk7XG5cdFx0fVxuXG5cdFx0dGhhdC5zY3JvbGxUbyh4LCB5LCB0aW1lKTtcblx0fSxcblxuXHRkaXNhYmxlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5zdG9wKCk7XG5cdFx0dGhpcy5fcmVzZXRQb3MoMCk7XG5cdFx0dGhpcy5lbmFibGVkID0gZmFsc2U7XG5cblx0XHQvLyBJZiBkaXNhYmxlZCBhZnRlciB0b3VjaHN0YXJ0IHdlIG1ha2Ugc3VyZSB0aGF0IHRoZXJlIGFyZSBubyBsZWZ0IG92ZXIgZXZlbnRzXG5cdFx0dGhpcy5fdW5iaW5kKE1PVkVfRVYsIHdpbmRvdyk7XG5cdFx0dGhpcy5fdW5iaW5kKEVORF9FViwgd2luZG93KTtcblx0XHR0aGlzLl91bmJpbmQoQ0FOQ0VMX0VWLCB3aW5kb3cpO1xuXHR9LFxuXHRcblx0ZW5hYmxlOiBmdW5jdGlvbiAoKSB7XG5cdFx0dGhpcy5lbmFibGVkID0gdHJ1ZTtcblx0fSxcblx0XG5cdHN0b3A6IGZ1bmN0aW9uICgpIHtcblx0XHRpZiAodGhpcy5vcHRpb25zLnVzZVRyYW5zaXRpb24pIHRoaXMuX3VuYmluZChUUk5FTkRfRVYpO1xuXHRcdGVsc2UgY2FuY2VsRnJhbWUodGhpcy5hbmlUaW1lKTtcblx0XHR0aGlzLnN0ZXBzID0gW107XG5cdFx0dGhpcy5tb3ZlZCA9IGZhbHNlO1xuXHRcdHRoaXMuYW5pbWF0aW5nID0gZmFsc2U7XG5cdH0sXG5cdFxuXHR6b29tOiBmdW5jdGlvbiAoeCwgeSwgc2NhbGUsIHRpbWUpIHtcblx0XHR2YXIgdGhhdCA9IHRoaXMsXG5cdFx0XHRyZWxTY2FsZSA9IHNjYWxlIC8gdGhhdC5zY2FsZTtcblxuXHRcdGlmICghdGhhdC5vcHRpb25zLnVzZVRyYW5zZm9ybSkgcmV0dXJuO1xuXG5cdFx0dGhhdC56b29tZWQgPSB0cnVlO1xuXHRcdHRpbWUgPSB0aW1lID09PSB1bmRlZmluZWQgPyAyMDAgOiB0aW1lO1xuXHRcdHggPSB4IC0gdGhhdC53cmFwcGVyT2Zmc2V0TGVmdCAtIHRoYXQueDtcblx0XHR5ID0geSAtIHRoYXQud3JhcHBlck9mZnNldFRvcCAtIHRoYXQueTtcblx0XHR0aGF0LnggPSB4IC0geCAqIHJlbFNjYWxlICsgdGhhdC54O1xuXHRcdHRoYXQueSA9IHkgLSB5ICogcmVsU2NhbGUgKyB0aGF0Lnk7XG5cblx0XHR0aGF0LnNjYWxlID0gc2NhbGU7XG5cdFx0dGhhdC5yZWZyZXNoKCk7XG5cblx0XHR0aGF0LnggPSB0aGF0LnggPiAwID8gMCA6IHRoYXQueCA8IHRoYXQubWF4U2Nyb2xsWCA/IHRoYXQubWF4U2Nyb2xsWCA6IHRoYXQueDtcblx0XHR0aGF0LnkgPSB0aGF0LnkgPiB0aGF0Lm1pblNjcm9sbFkgPyB0aGF0Lm1pblNjcm9sbFkgOiB0aGF0LnkgPCB0aGF0Lm1heFNjcm9sbFkgPyB0aGF0Lm1heFNjcm9sbFkgOiB0aGF0Lnk7XG5cblx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zaXRpb25EdXJhdGlvbl0gPSB0aW1lICsgJ21zJztcblx0XHR0aGF0LnNjcm9sbGVyLnN0eWxlW3RyYW5zZm9ybV0gPSAndHJhbnNsYXRlKCcgKyB0aGF0LnggKyAncHgsJyArIHRoYXQueSArICdweCkgc2NhbGUoJyArIHNjYWxlICsgJyknICsgdHJhbnNsYXRlWjtcblx0XHR0aGF0Lnpvb21lZCA9IGZhbHNlO1xuXHR9LFxuXHRcblx0aXNSZWFkeTogZnVuY3Rpb24gKCkge1xuXHRcdHJldHVybiAhdGhpcy5tb3ZlZCAmJiAhdGhpcy56b29tZWQgJiYgIXRoaXMuYW5pbWF0aW5nO1xuXHR9XG59O1xuXG5mdW5jdGlvbiBwcmVmaXhTdHlsZSAoc3R5bGUpIHtcblx0aWYgKCB2ZW5kb3IgPT09ICcnICkgcmV0dXJuIHN0eWxlO1xuXG5cdHN0eWxlID0gc3R5bGUuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBzdHlsZS5zdWJzdHIoMSk7XG5cdHJldHVybiB2ZW5kb3IgKyBzdHlsZTtcbn1cblxuZHVtbXlTdHlsZSA9IG51bGw7XHQvLyBmb3IgdGhlIHNha2Ugb2YgaXRcblxuaWYgKHR5cGVvZiBleHBvcnRzICE9PSAndW5kZWZpbmVkJykgZXhwb3J0cy5pU2Nyb2xsID0gaVNjcm9sbDtcbmVsc2Ugd2luZG93LmlTY3JvbGwgPSBpU2Nyb2xsO1xuXG59KSh3aW5kb3csIGRvY3VtZW50KTtcblxuXG5cblxuLyoqKioqKioqKioqKioqKioqXG4gKiogV0VCUEFDSyBGT09URVJcbiAqKiAuL3p4L2pzL2lzY3JvbGwuanNcbiAqKiBtb2R1bGUgaWQgPSA4XG4gKiogbW9kdWxlIGNodW5rcyA9IDAgMSAzXG4gKiovIl0sInNvdXJjZVJvb3QiOiIifQ==");
}});